"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[9525],{9525:(e,o,r)=>{r.r(o),r.d(o,{default:()=>s,getModel:()=>l});var n=r(3802),t={class:"disk-page"};var a=r(8401);const i={auth:function(){return{permission:"disks.update"}},head:{title:function(){return{inner:_.has(this.form,"name")?this.form.name:"Loading..."}}},data:function(){return{disk:null,form:null,loading:!1}},components:{"shared-form":r(2112).Z},methods:{isLocked:function(e){return _.includes(["public","local"],e)},submit:function(){var e=this;this.loading=!0,this.form.patch("/api/disks/".concat(this.disk.id)).then((function(){toast("Disk successfully saved","success"),e.$router.push("/disks")})).catch((function(o){toast(o.message,"failed"),e.loading=!1}))}},beforeRouteEnter:function(e,o,r){l(e.params.disk,(function(e,o){r(e?function(o){o.$router.push("/disks"),toast(e.toString(),"danger")}:function(e){e.isLocked(o.handle)?e.$router.push("/disks"):(e.disk=o,e.form=new a.Z({name:o.name,handle:o.handle,driver:o.driver,configurations:o.configurations},!0),e.$nextTick((function(){e.$emit("updateHead")})))})}))}};function l(e,o){axios.get("/api/disks/".concat(e)).then((function(e){o(null,e.data.data)})).catch((function(e){o(new Error("The requested disk could not be found"))}))}const s=(0,r(3744).Z)(i,[["render",function(e,o,r,a,i,l){var s=(0,n.resolveComponent)("page-title"),d=(0,n.resolveComponent)("portal"),u=(0,n.resolveComponent)("shared-form");return(0,n.openBlock)(),(0,n.createElementBlock)("div",t,[(0,n.createVNode)(d,{to:"title"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(s,{icon:"hdd"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Edit Disk")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),i.form?((0,n.openBlock)(),(0,n.createBlock)(u,{key:0,loading:i.loading,form:i.form},null,8,["loading","form"])):(0,n.createCommentVNode)("",!0)])}]])},2112:(e,o,r)=>{r.d(o,{Z:()=>l});var n=r(3802),t={class:"buttons"},a={class:"row"};const i={data:function(){return{driverOptions:[{label:"Local",value:"local"},{label:"S3",value:"s3"},{label:"FTP",value:"ftp"},{label:"SFTP",value:"sftp"}]}},props:{form:{type:Object,required:!0},loading:{type:Boolean,required:!1}}};const l=(0,r(3744).Z)(i,[["render",function(e,o,r,i,l,s){var d=(0,n.resolveComponent)("ui-button"),u=(0,n.resolveComponent)("portal"),c=(0,n.resolveComponent)("section-card"),m=(0,n.resolveComponent)("ui-input-group"),f=(0,n.resolveComponent)("ui-slug-group"),h=(0,n.resolveComponent)("ui-select-group");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(u,{to:"actions"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",t,[(0,n.createVNode)(d,{to:{name:"disks"},variant:"secondary"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Go Back")]}),void 0,!0),_:1}),(0,n.createVNode)(d,{type:"submit",onClick:(0,n.withModifiers)(e.$parent.submit,["prevent"]),variant:"primary",disabled:!r.form.hasChanges||r.loading},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Save")]}),void 0,!0),_:1},8,["onClick","disabled"])])]}),void 0,!0),_:1}),(0,n.withDirectives)((0,n.createVNode)(c,{title:"Loading..."},null,512),[[n.vShow,r.loading]]),(0,n.withDirectives)((0,n.createElementVNode)("div",null,[(0,n.createVNode)(c,{id:"disk_panel_general",title:"General Information",description:"General information about your filesystem disk and what it manages.",tabindex:"-1"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",a,[(0,n.createVNode)(m,{class:"col w-full lg:w-1/2",id:"disk-name",name:"name",label:"Name",help:"What should this filesystem disk be called?",autocomplete:"off",autofocus:"",required:"","has-error":r.form.errors.has("name"),"error-message":r.form.errors.get("name"),modelValue:r.form.name,"onUpdate:modelValue":o[0]||(o[0]=function(e){return r.form.name=e})},null,8,["has-error","error-message","modelValue"]),(0,n.createVNode)(f,{class:"col w-full lg:w-1/2",id:"disk-handle",name:"handle",label:"Handle",help:"Disk identifier (doubles as handle).",monospaced:"",autocomplete:"off",required:"",delimiter:"_",watch:r.form.name,"has-error":r.form.errors.has("handle"),"error-message":r.form.errors.get("handle"),modelValue:r.form.handle,"onUpdate:modelValue":o[1]||(o[1]=function(e){return r.form.handle=e})},null,8,["watch","has-error","error-message","modelValue"]),(0,n.createVNode)(h,{class:"col w-full lg:w-1/2",id:"disk-driver",name:"driver",label:"Driver",help:"Select and configure your driver.",options:l.driverOptions,"has-error":r.form.errors.has("driver"),"error-message":r.form.errors.get("driver"),modelValue:r.form.driver,"onUpdate:modelValue":o[2]||(o[2]=function(e){return r.form.driver=e})},null,8,["options","has-error","error-message","modelValue"])])]}),void 0,!0),_:1}),((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)("disks-configurations-".concat(r.form.driver)),{key:"disk-configurations",errors:r.form.errors,modelValue:r.form.configurations,"onUpdate:modelValue":o[3]||(o[3]=function(e){return r.form.configurations=e})},null,8,["errors","modelValue"]))],512),[[n.vShow,!r.loading]])])}]])}}]);