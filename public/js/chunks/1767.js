"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[1767],{1767:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h,getUserAndRoles:()=>f});var o=r(3802),n={class:"user-page"},i={class:"buttons"},s={class:"detail-list"},a=(0,o.createElementVNode)("dt",null,"Name",-1),c=(0,o.createElementVNode)("dt",null,"Email",-1),l=(0,o.createElementVNode)("dt",null,"Role",-1),u={class:"flex items-center"},d={class:"mr-4 w-3"},m=(0,o.createElementVNode)("span",{class:"sr-only"},"Link to related property",-1);const p={auth:function(){return{permission:"users.view"}},computed:{endpoint:function(){if(this.user.id)return"/datatable/users/"+this.user.id+"/activities"},verified:function(){return!(!this.user.email_verified_at||"0000-00-00 00:00:00"==this.user.email_verified_at)},canEdit:function(){return this.$user.id==this.user.id||!!this.user.role&&this.$can("users.update",this.user.role?this.user.role.level:0)}},head:{title:function(){return{inner:this.user.name||"Loading..."}}},data:function(){return{user:{},roles:[]}},beforeRouteEnter:function(e,t,r){f(e.params.user,(function(e,t,o,n){r(e?function(t){t.$router.push("/users"),toast(e.toString(),"danger")}:function(e){e.user=t,e.roles=o,window.emitter.emit("updateHead")})}))},methods:{destroy:function(e){var t=this;axios.delete("/api/users/"+e).then((function(e){toast("User successfully deleted.","success"),t.$router.push("/users")}))}}};function f(e,t){axios.all([axios.get("/api/roles"),axios.get("/api/users/"+e)]).then(axios.spread((function(e,r){r=r.data.data,e=e.data.data,t(null,r,e,{name:r.name,email:r.email,status:r.status,role:r.role?r.role.name:null,password:"",password_confirmation:""})})))}const h=(0,r(3744).Z)(p,[["render",function(e,t,r,p,f,h){var v=(0,o.resolveComponent)("page-title"),k=(0,o.resolveComponent)("portal"),N=(0,o.resolveComponent)("ui-button"),C=(0,o.resolveComponent)("status-card"),V=(0,o.resolveComponent)("sidebar"),_=(0,o.resolveComponent)("section-card"),x=(0,o.resolveComponent)("fa-icon"),w=(0,o.resolveComponent)("router-link"),y=(0,o.resolveComponent)("ui-datetime"),b=(0,o.resolveComponent)("ui-table");return(0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createVNode)(k,{to:"title"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(v,{icon:"users"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("User Profile - "+(0,o.toDisplayString)(f.user.name),1)]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,o.createVNode)(k,{to:"actions"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",i,["sm"!=e.$mq?((0,o.openBlock)(),(0,o.createBlock)(N,{key:"go-back-btn",to:{name:"users"},variant:"secondary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Go Back")]}),void 0,!0),_:1})):(0,o.createCommentVNode)("",!0),h.canEdit?((0,o.openBlock)(),(0,o.createBlock)(N,{key:"edit-user-btn",to:{name:"users.edit",params:{user:f.user.id}},variant:"primary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Edit User")]}),void 0,!0),_:1},8,["to"])):(0,o.createCommentVNode)("",!0)])]}),void 0,!0),_:1}),(0,o.createVNode)(k,{to:"sidebar-right"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(V,null,{default:(0,o.withCtx)((function(){return[f.user?((0,o.openBlock)(),(0,o.createBlock)(C,{key:0,id:"user_panel_status_card",entry:f.user,user:!0,tabindex:"-1"},null,8,["entry"])):(0,o.createCommentVNode)("",!0)]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,o.createVNode)(_,{id:"user_panel_info",title:"User Information",description:"General information about this user."},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("dl",s,[a,(0,o.createElementVNode)("dd",null,(0,o.toDisplayString)(f.user.name),1),c,(0,o.createElementVNode)("dd",null,(0,o.toDisplayString)(f.user.email),1),l,(0,o.createElementVNode)("dd",null,(0,o.toDisplayString)(f.user.role?f.user.role.name:null),1)])]}),void 0,!0),_:1}),(0,o.createVNode)(_,{id:"user_panel_activity",title:"User Activity",description:"See what this user has been doing around the site.",tabindex:"-1"},{default:(0,o.withCtx)((function(){return[f.user.id?((0,o.openBlock)(),(0,o.createBlock)(b,{key:"activities-"+f.user.id,class:"activities-table",id:"activities",endpoint:h.endpoint,"sort-by":"created_at","sort-in":"desc","per-page":10},{description:(0,o.withCtx)((function(e){return[(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("div",d,[e.record.properties.icon?((0,o.openBlock)(),(0,o.createBlock)(x,{key:0,icon:["fas",e.record.properties.icon],class:"fa-fw"},null,8,["icon"])):((0,o.openBlock)(),(0,o.createBlock)(x,{key:1,class:"fa-xs fa-fw",icon:["fas","circle"]}))]),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.record.description)+" ",1),e.record.properties.link?((0,o.openBlock)(),(0,o.createBlock)(w,{key:0,to:"/"+e.record.properties.link,class:"ml-2"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(x,{class:"fa-fw fa-sm",icon:["fas","link"]}),m]}),void 0,!0),_:2},1032,["to"])):(0,o.createCommentVNode)("",!0)])]})),created_at:(0,o.withCtx)((function(e){return[(0,o.createVNode)(y,{timestamp:e.record.created_at},null,8,["timestamp"])]})),_:1},8,["endpoint"])):(0,o.createCommentVNode)("",!0)]}),void 0,!0),_:1})])}]])}}]);