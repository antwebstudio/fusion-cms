"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[5472],{5472:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d,getModels:()=>l});var n=o(3802),a={class:"matrix-page"};var r=o(8401);const i={auth:function(){return{permission:"fieldsets.update"}},head:{title:function(){return{inner:_.has(this.form,"name")?this.form.name:"Loading..."}}},data:function(){return{fieldset:{},form:null,loading:!1}},components:{"shared-form":o(3448).Z},methods:{submit:function(){var e=this;this.loading=!0,this.form.patch("/api/fieldsets/".concat(this.fieldset.id)).then((function(t){e.$store.dispatch("navigation/fetchAdminNavigation"),toast("Fieldset successfully updated","success"),e.$router.push("/fieldsets"),e.loading=!1})).catch((function(t){toast(t.message,"failed"),e.loading=!1}))}},beforeRouteEnter:function(e,t,o){l(e.params.fieldset,(function(e,t){o(e?function(t){toast(e.toString(),"danger"),t.$router.push("/fieldsets")}:function(e){e.fieldset=t.data.data,e.form=new r.Z({name:e.fieldset.name,handle:e.fieldset.handle,status:e.fieldset.status?"1":"0",fields:e.fieldset.fields},!0),e.$nextTick((function(){window.emitter.emit("updateHead")}))})}))}};function l(e,t){axios.all([axios.get("/api/fieldsets/".concat(e))]).then(axios.spread((function(e){t(null,e)}))).catch((function(e){t(new Error("The requested fieldset could not be found"))}))}const d=(0,o(3744).Z)(i,[["render",function(e,t,o,r,i,l){var d=(0,n.resolveComponent)("page-title"),s=(0,n.resolveComponent)("portal"),u=(0,n.resolveComponent)("shared-form");return(0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.createVNode)(s,{to:"title"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(d,{icon:"layer-group"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Edit Fieldset")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),i.form?((0,n.openBlock)(),(0,n.createBlock)(u,{key:0,loading:i.loading,form:i.form,submit:l.submit},null,8,["loading","form","submit"])):(0,n.createCommentVNode)("",!0)])}]])},3448:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(3802),a={class:"buttons"},r={class:"row"},i={class:"col w-full lg:w-1/2"},l={class:"col w-full lg:w-1/2"};const d={data:function(){return{placements:[{label:"Body",value:"body"},{label:"Sidebar",value:"sidebar"}]}},props:{form:{type:Object,required:!0},fieldset:{type:Object,required:!1},submit:{required:!0},loading:{type:Boolean,required:!1}},created:function(){this.$store.commit("fieldtypes/setStructure","fieldsets")}};const s=(0,o(3744).Z)(d,[["render",function(e,t,o,d,s,u){var c=(0,n.resolveComponent)("ui-button"),f=(0,n.resolveComponent)("portal"),m=(0,n.resolveComponent)("section-card"),h=(0,n.resolveComponent)("ui-toggle"),p=(0,n.resolveComponent)("sidebar-section"),v=(0,n.resolveComponent)("status-card"),g=(0,n.resolveComponent)("sidebar"),b=(0,n.resolveComponent)("ui-input-group"),V=(0,n.resolveComponent)("ui-slug-group"),w=(0,n.resolveComponent)("field-builder");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(f,{to:"actions"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",a,["sm"!=e.$mq?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,to:{name:"fieldsets"},variant:"secondary"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Go Back")]}),void 0,!0),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(c,{type:"submit",onClick:(0,n.withModifiers)(o.submit,["prevent"]),variant:"primary",disabled:!o.form.hasChanges||o.loading},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Save")]}),void 0,!0),_:1},8,["onClick","disabled"])])]}),void 0,!0),_:1}),(0,n.withDirectives)((0,n.createVNode)(m,{title:"Loading..."},null,512),[[n.vShow,o.loading]]),(0,n.createVNode)(f,{to:"sidebar-right"},{default:(0,n.withCtx)((function(){return[(0,n.withDirectives)((0,n.createElementVNode)("div",null,[(0,n.createVNode)(g,{id:"fieldset-sidebar"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(p,{id:"fieldset_panel_status",tabindex:"-1"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(h,{id:"fieldset-status",name:"status",label:"Status",help:o.form.status?"Toggle to disable this fieldset.":"Toggle to enable this fieldset.",modelValue:o.form.status,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.form.status=e}),"true-value":1,"false-value":0},null,8,["help","modelValue"])]}),void 0,!0),_:1}),o.fieldset?((0,n.openBlock)(),(0,n.createBlock)(v,{key:0,entry:o.fieldset,id:"fieldset_panel_status_card",tabindex:"-1"},null,8,["entry"])):(0,n.createCommentVNode)("",!0)]}),void 0,!0),_:1})],512),[[n.vShow,!o.loading]])]}),void 0,!0),_:1}),(0,n.withDirectives)((0,n.createElementVNode)("div",null,[(0,n.createVNode)(m,{id:"fieldset_panel_general",title:"General Information",description:"General information about your fieldset and what it manages.",tabindex:"-1"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("div",i,[(0,n.createVNode)(b,{id:"fieldset-name",name:"name",label:"Name",help:"What should this fieldset be called?",autocomplete:"off",autofocus:"",required:"","has-error":o.form.errors.has("name"),"error-message":o.form.errors.get("name"),modelValue:o.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.form.name=e})},null,8,["has-error","error-message","modelValue"])]),(0,n.createElementVNode)("div",l,[(0,n.createVNode)(V,{id:"fieldset-handle",name:"handle",label:"Handle",help:"A developer-friendly identifier.",monospaced:"",autocomplete:"off",required:"",delimiter:"_",watch:o.form.name,"has-error":o.form.errors.has("handle"),"error-message":o.form.errors.get("handle"),modelValue:o.form.handle,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.form.handle=e})},null,8,["watch","has-error","error-message","modelValue"])])])]}),void 0,!0),_:1}),(0,n.createVNode)(m,{id:"fieldset_panel_fields",grid:!1,title:"Fields",description:"Manage fields for this fieldset.",tabindex:"-1"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(w,{modelValue:o.form.fields,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.form.fields=e}),structure:"fieldsets",handle:"fieldset"},null,8,["modelValue"])]}),void 0,!0),_:1})],512),[[n.vShow,!o.loading]])])}]])}}]);