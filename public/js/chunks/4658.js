"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[4658],{4658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(3361);const s={name:"replicator-fieldtype",data:function(){return{replicants:_.defaultTo(this.value,[]),sections:[],active:0}},props:{field:{type:Object,required:!0},value:{type:Array,required:!1,default:function(){return[]}},errors:{type:Object,required:!1,default:function(){}}},watch:{replicants:function(e){this.$emit("input",e)}},methods:{fieldErrors:function(e){var t=_.has(this.errors,"errors")?this.errors.errors:{};return t=_.pickBy(t,(function(t,n){return _.startsWith(n,e)})),t=_.mapKeys(t,(function(t,n){return _.replace(n,e,"")})),new r.Z(t)},_errorMessage:function(e){return this.errors?this.errors.get(e):""},fields:function(e){var t=_.findIndex(this.sections,(function(t){return t.id==e.id}));return-1!=t?this.sections[t].fields:[]},add:function(e){var t=this.sections[e],n={};_.each(t.fields,(function(e){return n[e.handle]=e.default})),this.replicants.push({section:t,fields:n})},move:function(e,t){this.replicants.splice(t,0,this.replicants.splice(e,1)[0])},remove:function(e){this.replicants.length>0&&this.replicants.splice(e,1)}},created:function(){var e=this;axios.get("/api/replicators/".concat(this.field.settings.replicator)).then((function(t){return e.sections=t.data.data.sections}))}};const i=(0,n(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("label",{staticClass:"form__label",attrs:{for:e.field.handle},domProps:{innerHTML:e._s(e.field.name)}}),e._v(" "),e._l(e.sections,(function(n,r){return t("ui-button",{key:n.handle,staticClass:"mr-2",attrs:{variant:"secondary"},on:{click:function(t){return e.add(r)}}},[e._v("\n        "+e._s(n.name)+"\n        "),t("fa-icon",{staticClass:"fa-xs",attrs:{icon:"plus"}})],1)})),e._v(" "),t("ui-tabs",{attrs:{move:e.move}},e._l(e.replicants,(function(n,r){return t("ui-tab",{key:"replicant-".concat(r,"-tab"),attrs:{name:"[".concat(r+1,"] ").concat(n.section.name),remove:e.remove}},e._l(e.fields(n.section),(function(s){return t(s.type.id+"-fieldtype",{key:s.handle,tag:"component",staticClass:"form__group",attrs:{field:s,errors:e.fieldErrors("".concat(e.field.handle,".").concat(r,".fields."))},model:{value:n.fields[s.handle],callback:function(t){e.$set(n.fields,s.handle,t)},expression:"replicant.fields[sub.handle]"}})})),1)})),1)],2)}),[],!1,null,null,null).exports}}]);