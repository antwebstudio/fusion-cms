"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[605],{2945:(e,t,o)=>{o.d(t,{Z:()=>n});const n={props:{field:{type:Object,required:!0},value:{required:!1,default:null},errors:{type:Object,required:!1,default:function(){}}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{hasError:function(e){return this.errors&&this.errors.has(e)},errorMessage:function(e){return this.hasError(e)?this.errors.get(e):""}}}},605:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var n=o(3802),r={class:"input-group"},i=(0,n.createElementVNode)("span",{class:"sr-only"},"Choose an existing video file",-1),l=(0,n.createElementVNode)("span",{class:"sr-only"},"Clear field",-1),d={key:0},a={controls:"",crossorigin:""},s=["src"],u={key:1},c=["data-plyr-embed-id"],m={class:"help"},p={class:"help"};var f=o(2945),h=o(8273);o(1443);const v={name:"video-fieldtype",mixins:[f.Z,h.Z],data:function(){return{endpoint:"/datatable/files/video",player:{},options:{title:"Preview",controls:["play-large","restart","play","progress","current-time","duration","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["quality","loop"]}}},computed:{isEmbeddedVideo:function(){return Boolean(this.model)&&!this.youtube},isYoutubeVideo:function(){return Boolean(this.model)&&this.youtube},youtube:function(){if(this.model){var e=this.model.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/);if(e&&11==e[2].length)return e[2]}return!1}},methods:{clear:function(){this.model=""}}};const V=(0,o(3744).Z)(v,[["render",function(e,t,o,f,h,v){var V=(0,n.resolveComponent)("ui-input"),y=(0,n.resolveComponent)("fa-icon"),b=(0,n.resolveComponent)("ui-button"),C=(0,n.resolveComponent)("ui-field-group"),N=(0,n.resolveComponent)("ui-plyr"),E=(0,n.resolveComponent)("ui-radio"),g=(0,n.resolveComponent)("ui-date"),w=(0,n.resolveComponent)("ui-table"),x=(0,n.resolveComponent)("ui-modal"),k=(0,n.resolveDirective)("modal");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(C,{name:e.field.handle,fieldId:"".concat(e.field.handle,"-field"),label:e.field.name,help:e.field.help,hasError:e.hasError(e.field.handle),errorMessage:e.errorMessage(e.field.handle)},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",r,[(0,n.createVNode)(V,{class:"field-input field",id:e.field.handle,name:e.field.handle,help:e.field.help,"aria-describedby":e.field.help,hasError:e.hasError(e.field.handle),modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t})},null,8,["id","name","help","aria-describedby","hasError","modelValue"]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(b,{icon:""},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(y,{icon:["fas","plus-circle"]}),i]}),void 0,!0),_:1})),[[k,void 0,"selection-modal"]]),(0,n.createVNode)(b,{icon:"",onClick:v.clear},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(y,{icon:["fas","times"],class:"mr-1"}),l]}),void 0,!0),_:1},8,["onClick"])])]}),void 0,!0),_:1},8,["name","fieldId","label","help","hasError","errorMessage"]),v.isEmbeddedVideo?((0,n.openBlock)(),(0,n.createElementBlock)("div",d,[(0,n.createVNode)(N,{options:h.options},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("video",a,[(0,n.createElementVNode)("source",{src:e.model,size:"576"},null,8,s)])]}),void 0,!0),_:1},8,["options"])])):(0,n.createCommentVNode)("",!0),v.isYoutubeVideo?((0,n.openBlock)(),(0,n.createElementBlock)("div",u,[(0,n.createVNode)(N,{options:h.options},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",{"data-plyr-provider":"youtube","data-plyr-embed-id":v.youtube},null,8,c)]}),void 0,!0),_:1},8,["options"])])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(x,{name:"selection-modal",title:"Choose an existing video file"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(w,{endpoint:h.endpoint,id:"video-files","sort-by":"name","sort-in":"desc","per-page":10},{name:(0,n.withCtx)((function(o){return[(0,n.createVNode)(E,{id:"selection-".concat(o.record.id),name:"selection","native-value":o.record.url,modelValue:e.model,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.model=t})},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(o.record.name),1)]}),void 0,!0),_:2},1032,["id","native-value","modelValue"])]})),bytes:(0,n.withCtx)((function(t){return[(0,n.createElementVNode)("span",m,(0,n.toDisplayString)(t.record.bytes|e.bytes),1)]})),extension:(0,n.withCtx)((function(e){return[(0,n.createElementVNode)("span",p,(0,n.toDisplayString)(e.record.extension),1)]})),created_at:(0,n.withCtx)((function(e){return[(0,n.createVNode)(g,{timestamp:e.record.created_at},null,8,["timestamp"])]})),_:1},8,["endpoint"])]}),void 0,!0),_:1})])}]])}}]);