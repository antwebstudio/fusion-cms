"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[3888],{2945:(e,t,n)=>{n.d(t,{Z:()=>o});const o={props:{field:{type:Object,required:!0},value:{required:!1,default:null},errors:{type:Object,required:!1,default:function(){}}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{hasError:function(e){return this.errors&&this.errors.has(e)},errorMessage:function(e){return this.hasError(e)?this.errors.get(e):""}}}},3888:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o=n(3802),l={key:0,class:"table-wrapper"},r=["id"],i=(0,o.createElementVNode)("th",{class:"w-8"},null,-1),s={class:"buttons__group"},a=(0,o.createElementVNode)("span",{class:"sr-only"},"Add column",-1),c=(0,o.createElementVNode)("span",{class:"sr-only"},"Remove column",-1),d=(0,o.createElementVNode)("th",{class:"w-32"},null,-1),u=(0,o.createElementVNode)("span",{class:"sr-only"},"Move row",-1),m={class:"buttons__group"},f=(0,o.createElementVNode)("span",{class:"sr-only"},"Add row",-1),h=(0,o.createElementVNode)("span",{class:"sr-only"},"Remove row",-1);var p=n(6104),w=n.n(p);const v={name:"table-fieldtype",mixins:[n(2945).Z],data:function(){return{initRows:this.field.settings.initRows||1,initCols:this.field.settings.initCols||2}},computed:{model:{get:function(){var e=this.value||[];return 0==e.length?this.newTable():e},set:function(e){this.$emit("input",e)}},numRows:function(){return this.model.rows.length},numCols:function(){return _.defaultTo(this.getRow(0).cols,[]).length}},watch:{model:{deep:!0,handler:function(e){this.$emit("input",e)}}},methods:{newTable:function(){var e=this;this.model={rows:new Array(this.initRows).fill({}).map((function(t){return e.newRow(e.initCols)}))}},addRow:function(e){this.model.rows.splice((e||0)+1,0,this.newRow())},removeRow:function(e){this.model.rows.splice(e||this.numRows,1)},newRow:function(e){var t=this;return{_id:w()(),cols:new Array(e||this.numCols).fill({}).map((function(e){return t.newCell()}))}},getRow:function(e){return this.model.rows[e]||[]},addCol:function(e){var t=this;this.model.rows.forEach((function(n){return n.cols.splice((e||0)+1,0,t.newCell())}))},removeCol:function(e){var t=this;this.model.rows.forEach((function(n){return n.cols.splice(e||t.numCols,1)}))},newCell:function(e){return{_id:w()(),value:e}}}};const C=(0,n(3744).Z)(v,[["render",function(e,t,n,p,w,v){var C=(0,o.resolveComponent)("fa-icon"),V=(0,o.resolveComponent)("ui-button"),k=(0,o.resolveComponent)("ui-sortable-handle"),N=(0,o.resolveComponent)("ui-textarea"),b=(0,o.resolveComponent)("ui-sortable-item"),E=(0,o.resolveComponent)("ui-sortable-list"),g=(0,o.resolveComponent)("ui-field-group");return(0,o.openBlock)(),(0,o.createBlock)(g,{name:e.field.handle,fieldId:"".concat(e.field.handle,"-field"),label:e.field.name,"has-error":e.hasError(e.field.handle),"error-message":e.errorMessage(e.field.handle)},{default:(0,o.withCtx)((function(){return[v.model?((0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createElementVNode)("table",{id:"".concat(e.field.handle,"-table"),class:"table table-auto","aria-live":"polite"},[(0,o.createElementVNode)("thead",null,[(0,o.createElementVNode)("tr",null,[i,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(v.numCols,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("th",{key:"head-".concat(e)},[(0,o.createElementVNode)("span",s,[(0,o.createVNode)(V,{icon:"",size:"small",onClick:function(t){return v.addCol(e-1)}},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(C,{icon:"plus",class:"icon"}),a]}),void 0,!0),_:2},1032,["onClick"]),(0,o.createVNode)(V,{icon:"",size:"small",disabled:1==e,onClick:function(t){return v.removeCol(e-1)}},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(C,{icon:"times",class:"icon"}),c]}),void 0,!0),_:2},1032,["disabled","onClick"])])])})),128)),d])]),(0,o.createVNode)(E,{modelValue:v.model.rows,"onUpdate:modelValue":t[0]||(t[0]=function(e){return v.model.rows=e}),class:(0,o.normalizeClass)("".concat(e.field.handle,"-sortable-list"))},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(v.model.rows,(function(e,t){return(0,o.openBlock)(),(0,o.createBlock)(b,{key:e._id},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("td",null,[(0,o.createVNode)(k,{class:"cursor-move inline-block"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(C,{icon:"grip-vertical",class:"handle fa-fw text-gray-400"}),u]}),void 0,!0),_:1})]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.cols,(function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("td",{key:"".concat(e._id,"-").concat(t)},[(0,o.createVNode)(N,{name:"cell-".concat(e._id),modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t}},null,8,["name","modelValue","onUpdate:modelValue"])])})),128)),(0,o.createElementVNode)("td",null,[(0,o.createElementVNode)("div",m,[(0,o.createVNode)(V,{size:"small",icon:"",onClick:function(e){return v.addRow(t)}},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(C,{icon:"plus",class:"icon"}),f]}),void 0,!0),_:2},1032,["onClick"]),(0,o.createVNode)(V,{size:"small",icon:"",disabled:0==t,onClick:function(e){return v.removeRow(t)}},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(C,{icon:"times",class:"icon"}),h]}),void 0,!0),_:2},1032,["disabled","onClick"])])])])]}),void 0,!0),_:2},1024)})),128))])]}),void 0,!0),_:1},8,["modelValue","class"])],8,r)])):(0,o.createCommentVNode)("",!0)]}),void 0,!0),_:1},8,["name","fieldId","label","has-error","error-message"])}]])}}]);