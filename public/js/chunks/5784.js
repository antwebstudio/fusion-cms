"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[5784],{5784:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P,getSingle:()=>T,secondsToString:()=>R});var l=a(3802),n={class:"single-page"},i={class:"buttons"},o={key:0,class:"row"},s={class:"col w-full sm:w-1/2 xl:w-1/4"},r={class:"analytics"},c={class:"analytics__stat"},d=(0,l.createElementVNode)("div",{class:"analytics__stat-label"},[(0,l.createElementVNode)("h3",null,"Total Page Views")],-1),u={class:"analytics__stat-value","aria-labelledby":"analytic-visitors"},m={class:"col w-full sm:w-1/2 xl:w-1/3 xxl:w-1/4"},f={class:"analytics"},v={class:"analytics__stat"},V=(0,l.createElementVNode)("div",{class:"analytics__stat-label"},[(0,l.createElementVNode)("h3",null,"Total Visitors")],-1),g={class:"analytics__stat-value","aria-labelledby":"analytic-visitors"},N={class:"col w-full sm:w-1/2 xl:w-1/3 xxl:w-1/4"},h={class:"analytics"},p={class:"analytics__stat"},w=(0,l.createElementVNode)("div",{class:"analytics__stat-label"},[(0,l.createElementVNode)("h3",null,"Bounce Rate")],-1),y={class:"analytics__stat-value","aria-labelledby":"analytic-visitors"},x={class:"col w-full sm:w-1/2 xl:w-1/3 xxl:w-1/4"},b={class:"analytics"},E={class:"analytics__stat"},C=(0,l.createElementVNode)("div",{class:"analytics__stat-label"},[(0,l.createElementVNode)("h3",null,"Average Session")],-1),k={class:"analytics__stat-value","aria-labelledby":"analytic-visitors"},S={class:"row"},B={class:"col w-full"};const D={head:{title:function(){return{inner:_.has(this.single,"name")?this.single.name:"Loading..."}}},data:function(){return{single:{},entry:{},isValid:null,sessionDuration:null,bounceRate:null,totalVisitors:null,totalPageViews:null}},beforeRouteEnter:function(e,t,a){var l,n=null,i=null,o=null,s=null;T(e.params.single,(function(e,t,r,c){e?a((function(t){t.$router.push("/"),toast(e.toString(),"danger")})):axios.get("/api/insights/check").then((function(e){"OK"==(l=e.data.status)?axios.get("/api/singles/{matrix.slug}/insight").then((function(e){n=R(e.data.data.averageSessionDuration),i=_.floor(e.data.data.bounceRate,2)+"%",o=Number(e.data.data.totalVisitors).toLocaleString(),s=Number(e.data.data.totalPageViews).toLocaleString()})):"failed"==l&&console.error("Insights error: "+e.data.message),a((function(e){e.single=r,e.entry=t,e.isValid="OK"==l,e.sessionDuration=n,e.bounceRate=i,e.totalVisitors=o,e.totalPageViews=s,e.$emit("updateHead")}))}))}))},beforeRouteUpdate:function(e,t,a){var l=this;T(e.params.single,(function(e,t,a,n){l.single=a,l.entry=t,l.$emit("updateHead")})),a()}};function T(e,t){axios.get("/api/singles/".concat(e)).then((function(e){var a={},l={};_.has(e,"data.data.single")?(l=e.data.data.matrix,a=e.data.data.single):(l=e.data.data,a={name:l.name,slug:l.slug,publish_at:null,expire_at:null,status:1});var n={name:a.name,slug:a.slug,publish_at:a.publish_at,expire_at:a.expire_at,status:a.status};_.forEach(l.blueprint.sections,(function(e){_.forEach(e.fields,(function(e){n[e.handle]=a[e.handle]}))})),t(null,a,l,n)})).catch((function(e){t(new Error("The requested entry could not be found"))}))}function R(e){var t="",a=_.floor((e%=86400)/3600),l=_.floor((e%=3600)/60);return a&&(t+=a+"h "),l&&(t+=l+"m "),(e=_.floor(e%60))&&(t+=e+"s"),""==t&&(t=e+"s"),t}const P=(0,a(3744).Z)(D,[["render",function(e,t,a,_,D,T){var R=(0,l.resolveComponent)("page-title"),P=(0,l.resolveComponent)("portal"),$=(0,l.resolveComponent)("ui-button"),L=(0,l.resolveComponent)("ui-card-body"),q=(0,l.resolveComponent)("ui-card");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createVNode)(P,{to:"title"},{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(R,{icon:D.single.icon||"pencil-alt",subtitle:D.single.description},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)((0,l.toDisplayString)(D.single.name),1)]}),void 0,!0),_:1},8,["icon","subtitle"])]}),void 0,!0),_:1}),(0,l.createVNode)(P,{to:"actions"},{default:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",i,["sm"!=e.$mq?((0,l.openBlock)(),(0,l.createBlock)($,{key:0,to:{name:"dashboard"},variant:"secondary"},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)("Go Back")]}),void 0,!0),_:1})):(0,l.createCommentVNode)("",!0),D.single.slug?((0,l.openBlock)(),(0,l.createBlock)($,{key:1,to:{name:"single.edit",params:{single:D.single.slug}},variant:"primary"},{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)("Edit")]}),void 0,!0),_:1},8,["to"])):(0,l.createCommentVNode)("",!0)])]}),void 0,!0),_:1}),D.isValid?((0,l.openBlock)(),(0,l.createElementBlock)("div",o,[(0,l.createElementVNode)("div",s,[(0,l.createVNode)(q,null,{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(L,null,{default:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",r,[(0,l.createElementVNode)("div",c,[d,(0,l.createElementVNode)("span",u,(0,l.toDisplayString)(D.totalPageViews),1)])])]}),void 0,!0),_:1})]}),void 0,!0),_:1})]),(0,l.createElementVNode)("div",m,[(0,l.createVNode)(q,null,{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(L,null,{default:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",f,[(0,l.createElementVNode)("div",v,[V,(0,l.createElementVNode)("span",g,(0,l.toDisplayString)(D.totalVisitors),1)])])]}),void 0,!0),_:1})]}),void 0,!0),_:1})]),(0,l.createElementVNode)("div",N,[(0,l.createVNode)(q,null,{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(L,null,{default:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",h,[(0,l.createElementVNode)("div",p,[w,(0,l.createElementVNode)("span",y,(0,l.toDisplayString)(D.bounceRate),1)])])]}),void 0,!0),_:1})]}),void 0,!0),_:1})]),(0,l.createElementVNode)("div",x,[(0,l.createVNode)(q,null,{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(L,null,{default:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",b,[(0,l.createElementVNode)("div",E,[C,(0,l.createElementVNode)("span",k,(0,l.toDisplayString)(D.sessionDuration),1)])])]}),void 0,!0),_:1})]}),void 0,!0),_:1})])])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",S,[(0,l.createElementVNode)("div",B,[(0,l.createVNode)(q,null,{default:(0,l.withCtx)((function(){return[(0,l.createVNode)(L,null,{default:(0,l.withCtx)((function(){return[(0,l.createTextVNode)(" Associated collection datatable ")]}),void 0,!0),_:1})]}),void 0,!0),_:1})])])])}]])}}]);