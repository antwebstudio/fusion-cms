"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[1112],{2945:(e,r,a)=>{a.d(r,{Z:()=>o});const o={props:{field:{type:Object,required:!0},value:{required:!1,default:null},errors:{type:Object,required:!1,default:function(){}}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{hasError:function(e){return this.errors&&this.errors.has(e)},errorMessage:function(e){return this.hasError(e)?this.errors.get(e):""}}}},1112:(e,r,a)=>{a.r(r),a.d(r,{default:()=>g});var o=a(3802),t={key:0,class:"row"},d={class:"col md:w-1/2"},l={class:"col md:w-1/2"},n={class:"col md:w-1/3"},s={class:"col md:w-1/3"},i={class:"col md:w-1/3"},c={class:"col w-full"},u=["id"],m=["innerHTML"],p={class:"help"},h=(0,o.createElementVNode)("a",{href:"https://developers.google.com/maps/documentation/javascript/get-api-key",target:"_blank"},"Google Maps API key",-1);const f={name:"address-fieldtype",mixins:[a(2945).Z],data:function(){return{map:null,marker:null,mapError:"",help:'<p>A <a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">Google Maps API key</a> is required in order to view the map component and retrieve latitude and longitude coordinates for your address.</p><p>Once you have obtained one, please visit the <router-link to="/settings/google_maps">Google Maps settings page</router-link> to enter your API key.</p>'}},computed:{apiKey:function(){return this.setting("maps_api_key")},hasAPIKey:function(){return this.apiKey&&""!=this.apiKey},hasGMaps:function(){return!_.isUndefined(window.google)},mapID:function(){return this.field.handle+"_map"}},watch:{model:{deep:!0,handler:function(e){this.locateAddress()}},apiKey:function(e){var r=this;this.$nextTick((function(){r.initializeMap()}))}},methods:{initializeMap:function(){var e=this;if(_.isUndefined(window.google)){var r=document.createElement("script");window.mapInit=function(){return e.createMap()},r.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=".concat(this.apiKey,"&callback=mapInit")),document.head.appendChild(r)}else this.createMap()},createMap:function(){this.map=new google.maps.Map(document.getElementById(this.mapID)),this.locateAddress()},locateAddress:_.debounce((function(){var e=this;if(!_.isUndefined(window.google)){google.maps.event.trigger(this.map,"resize");var r=new google.maps.Geocoder,a=_.trim(Object.values(this.model).join(" "));if(!a)return null!==this.marker&&this.marker.setMap(null),this.map.setCenter(new google.maps.LatLng(0,0)),this.map.setZoom(1),this.model.formatted_address="",this.model.lat="",void(this.model.lng="");r.geocode({address:a},(function(r,o){o===google.maps.GeocoderStatus.OK&&(e.map.setCenter(r[0].geometry.location),e.map.setZoom(16),e.model.formatted_address=r[0].formatted_address,e.model.lat=r[0].geometry.location.lat(),e.model.lng=r[0].geometry.location.lng(),a&&(null!==e.marker&&e.marker.setMap(null),e.marker=new google.maps.Marker({map:e.map,position:r[0].geometry.location})))}))}}),1500)},created:function(){_.isEmpty(this.value)&&(this.model={address1:"",address2:"",city:"",state:"",zip:"",country:"",lat:"",lng:"",formatted_address:""})}};const g=(0,a(3744).Z)(f,[["render",function(e,r,a,f,g,y){var v=(0,o.resolveComponent)("ui-input-group"),V=(0,o.resolveComponent)("router-link"),E=(0,o.resolveComponent)("ui-field-group");return(0,o.openBlock)(),(0,o.createBlock)(E,{name:e.field.handle,fieldId:"".concat(e.field.handle,"-field"),label:e.field.name,help:e.field.help},{default:(0,o.withCtx)((function(){return[e.model?((0,o.openBlock)(),(0,o.createElementBlock)("div",t,[(0,o.createElementVNode)("div",d,[(0,o.createVNode)(v,{name:e.field.handle+"_address1",required:e.field.required,label:"Address 1",placeholder:"Address 1","hide-label":"",modelValue:e.model.address1,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.model.address1=r}),hasError:e.hasError("".concat(e.field.handle,".address1")),errorMessage:e.errorMessage("".concat(e.field.handle,".address1"))},null,8,["name","required","modelValue","hasError","errorMessage"])]),(0,o.createElementVNode)("div",l,[(0,o.createVNode)(v,{label:"Address 2","hide-label":"",name:e.field.handle+"_address2",placeholder:"Address 2",modelValue:e.model.address2,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.model.address2=r}),hasError:e.hasError("".concat(e.field.handle,".address2")),errorMessage:e.errorMessage("".concat(e.field.handle,".address2"))},null,8,["name","modelValue","hasError","errorMessage"])]),(0,o.createElementVNode)("div",n,[(0,o.createVNode)(v,{name:e.field.handle+"_city",required:e.field.required,label:"City",placeholder:"City","hide-label":"",modelValue:e.model.city,"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.model.city=r}),hasError:e.hasError("".concat(e.field.handle,".city")),errorMessage:e.errorMessage("".concat(e.field.handle,".city"))},null,8,["name","required","modelValue","hasError","errorMessage"])]),(0,o.createElementVNode)("div",s,[(0,o.createVNode)(v,{name:e.field.handle+"_state",required:e.field.required,label:"State",placeholder:"State","hide-label":"",modelValue:e.model.state,"onUpdate:modelValue":r[3]||(r[3]=function(r){return e.model.state=r}),hasError:e.hasError("".concat(e.field.handle,".state")),errorMessage:e.errorMessage("".concat(e.field.handle,".state"))},null,8,["name","required","modelValue","hasError","errorMessage"])]),(0,o.createElementVNode)("div",i,[(0,o.createVNode)(v,{name:e.field.handle+"_zip",required:e.field.required,label:"Zip Code",placeholder:"Zip Code","hide-label":"",modelValue:e.model.zip,"onUpdate:modelValue":r[4]||(r[4]=function(r){return e.model.zip=r}),hasError:e.hasError("".concat(e.field.handle,".zip")),errorMessage:e.errorMessage("".concat(e.field.handle,".zip"))},null,8,["name","required","modelValue","hasError","errorMessage"])]),(0,o.createElementVNode)("div",c,[(0,o.createVNode)(v,{label:"Country","hide-label":"",name:e.field.handle+"_country",placeholder:"Country",modelValue:e.model.country,"onUpdate:modelValue":r[5]||(r[5]=function(r){return e.model.country=r}),hasError:e.hasError("".concat(e.field.handle,".country")),errorMessage:e.errorMessage("".concat(e.field.handle,".country"))},null,8,["name","modelValue","hasError","errorMessage"])])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",{class:"h-full rounded",id:y.mapID},[g.mapError?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"bg-gray-100 rounded shadow p-3",innerHTML:g.mapError},null,8,m)):(0,o.createCommentVNode)("",!0)],8,u),(0,o.withDirectives)((0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("p",null,[(0,o.createTextVNode)("A "),h,(0,o.createTextVNode)(" is required in order to view the map component and retrieve latitude and longitude coordinates for your address. Once you've obtained one, please visit the "),(0,o.createVNode)(V,{to:"/settings/google_maps"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Google Maps settings page")]}),void 0,!0),_:1}),(0,o.createTextVNode)(" to enter your API key.")])],512),[[o.vShow,0==y.hasAPIKey]])]}),void 0,!0),_:1},8,["name","fieldId","label","help"])}]])}}]);