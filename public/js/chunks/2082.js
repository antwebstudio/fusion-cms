"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[2082],{2082:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l,getLink:()=>a});var o=t(3802);var i=t(8401);const r={auth:function(){return{permission:"links.update"}},components:{"shared-form":t(8592).Z},data:function(){return{navigation:{},link:{},links:[],form:new i.Z({name:"",url:"",new_window:!1,parent_id:0,order:0,status:!1},!0),loading:!1}},methods:{submit:function(){var e=this;this.loading=!0,this.form.patch("/api/navigation/"+this.navigation.id+"/links/"+this.link.id).then((function(n){toast("Link saved successfully","success"),e.$router.push("/navigation/"+e.navigation.id+"/links")})).catch((function(n){toast(n.message,"failed"),e.loading=!1}))}},beforeRouteEnter:function(e,n,t){a(e.params.navigation,e.params.link,(function(e,n,o,r){t(e?function(n){n.$router.push("/navigation"),toast(e.toString(),"danger")}:function(e){e.navigation=o,e.link=n,e.form=new i.Z(r,!0),e.links=_.map(o.links,(function(e){return{label:e.name,value:e.id}})),e.links.unshift({label:"None",value:0}),e.$emit("updateHead")})}))}};function a(e,n,t){axios.all([axios.get("/api/navigation/"+e+"/links/"+n),axios.get("/api/navigation/"+e)]).then(axios.spread((function(e,n){e=e.data.data,n=n.data.data;var o={name:e.name,url:e.url,new_window:Number(e.new_window).toString(),parent_id:e.parent_id,order:e.order,status:e.status};_.forEach(n.blueprint.sections,(function(n){_.forEach(n.fields,(function(n){o[n.handle]=e[n.handle]}))})),t(null,e,n,o)})))}const l=(0,t(3744).Z)(r,[["render",function(e,n,t,i,r,a){var l=(0,o.resolveComponent)("page-title"),u=(0,o.resolveComponent)("portal"),d=(0,o.resolveComponent)("shared-form");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(u,{to:"title"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(l,{icon:"anchor"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Edit Link")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,o.createVNode)(d,{loading:r.loading,form:r.form,submit:a.submit,navigation:r.navigation,link:r.link,links:r.links},null,8,["loading","form","submit","navigation","link","links"])])}]])},8592:(e,n,t)=>{t.d(n,{Z:()=>l});var o=t(3802),i={class:"buttons"},r={key:0};const a={props:{link:{type:Object,default:function(){return{}}},links:{type:Array,required:!0},navigation:{type:Object,required:!0},form:{type:Object,required:!0},submit:{required:!0},loading:{type:Boolean,required:!1}},computed:{sections:function(){var e=[],n=[];return this.navigation.blueprint&&(e=_.filter(this.navigation.blueprint.sections,(function(e){return"body"==e.placement})),n=_.filter(this.navigation.blueprint.sections,(function(e){return"sidebar"==e.placement}))),{body:e,sidebar:n}},fields:function(){var e=[],n=[];return this.navigation.blueprint&&(e=_.filter(this.navigation.blueprint.sections,(function(e){return"body"==e.placement})),e=_.flatMap(e,(function(e){return e.fields})),n=_.filter(this.navigation.blueprint.sections,(function(e){return"sidebar"==e.placement})),n=_.flatMap(n,(function(e){return e.fields}))),{body:e,sidebar:n}}}};const l=(0,t(3744).Z)(a,[["render",function(e,n,t,a,l,u){var d=(0,o.resolveComponent)("ui-button"),s=(0,o.resolveComponent)("portal"),c=(0,o.resolveComponent)("section-card"),m=(0,o.resolveComponent)("ui-toggle"),f=(0,o.resolveComponent)("ui-select-group"),p=(0,o.resolveComponent)("sidebar-section"),v=(0,o.resolveComponent)("sidebar"),h=(0,o.resolveComponent)("ui-title-group"),g=(0,o.resolveComponent)("ui-input-group"),k=(0,o.resolveComponent)("ui-card-body"),b=(0,o.resolveComponent)("ui-card");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(s,{to:"actions"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",i,[t.navigation.id&&"sm"!=e.$mq?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,to:{name:"links",params:{navigation:t.navigation.id}},variant:"secondary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Go Back")]}),void 0,!0),_:1},8,["to"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(d,{type:"submit",onClick:(0,o.withModifiers)(t.submit,["prevent"]),variant:"primary",disabled:!t.form.hasChanges||t.loading},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Save")]}),void 0,!0),_:1},8,["onClick","disabled"])])]}),void 0,!0),_:1}),(0,o.withDirectives)((0,o.createVNode)(c,{title:"Loading..."},null,512),[[o.vShow,t.loading]]),(0,o.createVNode)(s,{to:"sidebar-right"},{default:(0,o.withCtx)((function(){return[(0,o.withDirectives)((0,o.createElementVNode)("div",null,[(0,o.createVNode)(v,{id:"link-sidebar"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(p,{id:"link_panel_status",tabindex:"-1"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(m,{name:"status",label:"Status",help:t.form.status?"Toggle to disable this link.":"Toggle to enable this link.",modelValue:t.form.status,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.form.status=e}),"true-value":!0,"false-value":!1},null,8,["help","modelValue"]),(0,o.createVNode)(f,{name:"new_window",label:"Open link where",help:"Determine where the link should open.",options:[{label:"New Window",value:"1"},{label:"Same Window",value:"0"}],modelValue:t.form.new_window,"onUpdate:modelValue":n[1]||(n[1]=function(e){return t.form.new_window=e})},null,8,["modelValue"])]}),void 0,!0),_:1})]}),void 0,!0),_:1})],512),[[o.vShow,!t.loading]])]}),void 0,!0),_:1}),(0,o.withDirectives)((0,o.createElementVNode)("div",null,[(0,o.createVNode)(b,{id:"link_panel",tabindex:"-1"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(k,null,{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(h,{name:"name",label:"Name",autocomplete:"off",autofocus:"",required:"","has-error":t.form.errors.has("name"),"error-message":t.form.errors.get("name"),modelValue:t.form.name,"onUpdate:modelValue":n[2]||(n[2]=function(e){return t.form.name=e})},null,8,["has-error","error-message","modelValue"]),(0,o.createVNode)(g,{name:"url",label:"URL",help:"The URL of the link.",autocomplete:"off","has-error":t.form.errors.has("url"),"error-message":t.form.errors.get("url"),modelValue:t.form.url,"onUpdate:modelValue":n[3]||(n[3]=function(e){return t.form.url=e})},null,8,["has-error","error-message","modelValue"])]}),void 0,!0),_:1})]}),void 0,!0),_:1}),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(u.sections.body,(function(e){return(0,o.openBlock)(),(0,o.createBlock)(c,{key:e.handle,id:"collection_panel_"+e.handle,title:e.name,description:e.description,tabindex:"-1"},{default:(0,o.withCtx)((function(){return[e.fields.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.fields,(function(e){return(0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.type.id+"-fieldtype"),{key:e.handle,field:e,errors:t.form.errors,modelValue:t.form[e.handle],"onUpdate:modelValue":function(n){return t.form[e.handle]=n}},null,8,["field","errors","modelValue","onUpdate:modelValue"])})),128))])):(0,o.createCommentVNode)("",!0)]}),void 0,!0),_:2},1032,["id","title","description"])})),128))],512),[[o.vShow,!t.loading]])])}]])}}]);