"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[2441],{2441:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var o=r(3802),n={class:"user-page"},i=(0,o.createElementVNode)("span",null,"Roles",-1),a={class:"flex items-center"},c={key:1},s={key:1},u=(0,o.createElementVNode)("p",null,"Are you sure you want to re-send the verification email to this user?",-1),l=(0,o.createElementVNode)("p",null,"Are you sure you want to send this user a password reset notification?",-1),d=(0,o.createElementVNode)("p",null,"Are you sure you want to force user to reset their password upon next login?",-1),f=(0,o.createElementVNode)("p",null,"Are you sure you want to permenantly delete this user?",-1);const p={auth:function(){return{permission:"users.viewAny"}},head:{title:function(){return{inner:"Users"}}},data:function(){return{roles:[],role:this.$route.params.role||null}},computed:{filteredRoles:function(){return _.filter(this.roles,(function(e){return"Guest"!==e.name&&1!==e.id}))},endpoint:function(){return this.role?"/datatable/users/"+this.role:"/datatable/users"},current:function(){var e=this,t=_.findIndex(this.roles,(function(t){return t.name==e.role}));return-1!=t?this.roles[t]:{name:"all",label:"All"}}},watch:{$route:function(e,t){this.role=e.params.role||null}},beforeRouteEnter:function(e,t,r){axios.get("/api/roles").then((function(e){r((function(t){return t.roles=e.data.data}))})).catch((function(e){r((function(e){return console.log(error)}))}))},methods:{destroy:function(e){axios.delete("/api/users/".concat(e)).then((function(e){toast("User successfully deleted.","success"),bus().$emit("refresh-datatable-users")})).catch((function(e){toast(e.response.data.message,"failed")}))},emailVerification:function(e){axios.post("/api/users/".concat(e,"/verify")).then((function(e){toast("Email verification notification has been sent to user.","success")})).catch((function(e){toast(e.response.data.message,"failed")}))},passwordReset:function(e){axios.post("/api/users/".concat(e,"/reset-password")).then((function(e){toast("Password reset notification has been sent to user.","success")})).catch((function(e){toast(e.response.data.message,"failed")}))},passwordExpire:function(e){axios.post("/api/users/".concat(e,"/expire-password")).then((function(e){toast("User password has been set as expired.","success")})).catch((function(e){toast(e.response.data.message,"failed")}))}}};const m=(0,r(3744).Z)(p,[["render",function(e,t,r,p,m,v){var w=(0,o.resolveComponent)("page-title"),h=(0,o.resolveComponent)("portal"),C=(0,o.resolveComponent)("ui-button"),k=(0,o.resolveComponent)("ui-dropdown-link"),x=(0,o.resolveComponent)("ui-dropdown-divider"),V=(0,o.resolveComponent)("ui-dropdown"),N=(0,o.resolveComponent)("ui-toolbar-group"),y=(0,o.resolveComponent)("ui-status"),B=(0,o.resolveComponent)("router-link"),_=(0,o.resolveComponent)("ui-date"),g=(0,o.resolveComponent)("ui-badge"),b=(0,o.resolveComponent)("ui-actions"),D=(0,o.resolveComponent)("ui-table"),T=(0,o.resolveComponent)("ui-card-body"),E=(0,o.resolveComponent)("ui-card"),$=(0,o.resolveComponent)("ui-modal"),R=(0,o.resolveDirective)("modal");return(0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createVNode)(h,{to:"title"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(w,{icon:"users"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Users - "+(0,o.toDisplayString)(v.current?v.current.name:""),1)]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,o.createVNode)(h,{to:"actions"},{default:(0,o.withCtx)((function(){return[e.$can("users.create")?((0,o.openBlock)(),(0,o.createBlock)(C,{key:"create-user-btn",to:{name:"users.create"},variant:"primary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Create User")]}),void 0,!0),_:1},8,["to"])):(0,o.createCommentVNode)("",!0)]}),void 0,!0),_:1}),(0,o.createVNode)(E,null,{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(T,null,{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(D,{key:"users",class:"user-table",id:"users","sort-by":"order","show-page-status":"","show-page-numbers":"",bulk:"","show-page-nav":"","show-page-ends":"",link_name:"users.edit",link_param:"user",reorder_route:"/api/users/reorder",show_status:!0,endpoint:v.endpoint},{toolbarPrepend:(0,o.withCtx)((function(){return[(0,o.createVNode)(N,null,{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(V,{id:"user-roles"},{menu:(0,o.withCtx)((function(){return[(0,o.createVNode)(k,{to:{name:"users"},exact:""},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("All")]}),void 0,!0),_:1}),(0,o.createVNode)(x),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(v.filteredRoles,(function(e){return(0,o.openBlock)(),(0,o.createBlock)(k,{key:e.name,to:{name:"users.role",params:{role:e.name}},exact:""},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(e.name),1)]}),void 0,!0),_:2},1032,["to"])})),128))]})),default:(0,o.withCtx)((function(){return[i]}),void 0,!0),_:1})]}),void 0,!0),_:1})]})),name:(0,o.withCtx)((function(t){return[(0,o.createElementVNode)("div",a,[(0,o.createVNode)(y,{value:t.record.status,class:"mr-2"},null,8,["value"]),e.$can("users.view")?((0,o.openBlock)(),(0,o.createBlock)(B,{key:0,to:{name:"users.show",params:{user:t.record.id}}},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(t.record.name),1)]}),void 0,!0),_:2},1032,["to"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",c,(0,o.toDisplayString)(t.record.name),1))])]})),email:(0,o.withCtx)((function(e){return[(0,o.createTextVNode)((0,o.toDisplayString)(e.record.email),1)]})),role:(0,o.withCtx)((function(t){return[e.$can("roles.view")?((0,o.openBlock)(),(0,o.createBlock)(B,{key:0,to:{name:"roles.show",params:{role:t.record.role.id}}},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(t.record.role.name),1)]}),void 0,!0),_:2},1032,["to"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",s,(0,o.toDisplayString)(t.record.role.name),1))]})),created_at:(0,o.withCtx)((function(e){return[(0,o.createVNode)(_,{timestamp:e.record.created_at},null,8,["timestamp"])]})),email_verified_at:(0,o.withCtx)((function(e){return[e.record.email_verified_at?((0,o.openBlock)(),(0,o.createBlock)(g,{key:0,variant:"success"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Yes")]}),void 0,!0),_:1})):((0,o.openBlock)(),(0,o.createBlock)(g,{key:1,variant:"danger"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("No")]}),void 0,!0),_:1}))]})),actions:(0,o.withCtx)((function(r){return[((0,o.openBlock)(),(0,o.createBlock)(b,{id:"user_"+r.record.id+"_actions",key:"user_"+r.record.id+"_actions"},{default:(0,o.withCtx)((function(){return[e.$can("users.view")?((0,o.openBlock)(),(0,o.createBlock)(k,{key:0,to:{name:"users.show",params:{user:r.record.id}}},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("View")]}),void 0,!0),_:2},1032,["to"])):(0,o.createCommentVNode)("",!0),e.$can("users.update",r.record.role?r.record.role.level:0)?((0,o.openBlock)(),(0,o.createBlock)(k,{key:1,onClick:t[0]||(t[0]=(0,o.withModifiers)((function(){}),["prevent"])),to:{name:"users.edit",params:{user:r.record.id}}},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Edit")]}),void 0,!0),_:2},1032,["to"])):(0,o.createCommentVNode)("",!0),e.$can("users.update",r.record.role?r.record.role.level:0)?((0,o.openBlock)(),(0,o.createBlock)(x,{key:2})):(0,o.createCommentVNode)("",!0),e.$can("users.update",r.record.role?r.record.role.level:0)?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(k,{key:3,onClick:t[1]||(t[1]=(0,o.withModifiers)((function(){}),["prevent"]))},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)(" Resend Verification ")]}),void 0,!0),_:2},1024)),[[R,r.record,"verify-user"]]):(0,o.createCommentVNode)("",!0),e.$can("users.update",r.record.role?r.record.role.level:0)?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(k,{key:4,onClick:t[2]||(t[2]=(0,o.withModifiers)((function(){}),["prevent"]))},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)(" Reset Password ")]}),void 0,!0),_:2},1024)),[[R,r.record,"password-user"]]):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(x),r.record.id!=e.$user.id&&e.$can("users.delete",r.record.role?r.record.role.level:0)?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(k,{key:5,onClick:t[3]||(t[3]=(0,o.withModifiers)((function(){}),["prevent"])),class:"danger"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)(" Delete ")]}),void 0,!0),_:2},1024)),[[R,r.record,"delete-user"]]):(0,o.createCommentVNode)("",!0)]}),void 0,!0),_:2},1032,["id"]))]})),_:1},8,["endpoint"])]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,o.createVNode)(h,{to:"modals"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)($,{name:"verify-user",title:"Verification Email"},{footer:(0,o.withCtx)((function(e){return[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{onClick:function(t){return v.emailVerification(e.data.id)},variant:"primary",class:"ml-3"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Confirm")]}),void 0,!0),_:2},1032,["onClick"])),[[R,void 0,"verify-user"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{variant:"secondary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Cancel")]}),void 0,!0),_:1})),[[R,void 0,"verify-user"]])]})),default:(0,o.withCtx)((function(){return[u]}),void 0,!0),_:1}),(0,o.createVNode)($,{name:"password-user",title:"Password Reset"},{footer:(0,o.withCtx)((function(e){return[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{onClick:function(t){return v.passwordReset(e.data.id)},variant:"primary",class:"ml-3"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Confirm")]}),void 0,!0),_:2},1032,["onClick"])),[[R,void 0,"password-user"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{variant:"secondary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Cancel")]}),void 0,!0),_:1})),[[R,void 0,"password-user"]])]})),default:(0,o.withCtx)((function(){return[l]}),void 0,!0),_:1}),(0,o.createVNode)($,{name:"expire-password",title:"Expire Password"},{footer:(0,o.withCtx)((function(e){return[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{onClick:function(t){return v.passwordExpire(e.data.id)},variant:"primary",class:"ml-3"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Confirm")]}),void 0,!0),_:2},1032,["onClick"])),[[R,void 0,"expire-password"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{variant:"secondary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Cancel")]}),void 0,!0),_:1})),[[R,void 0,"expire-password"]])]})),default:(0,o.withCtx)((function(){return[d]}),void 0,!0),_:1}),(0,o.createVNode)($,{name:"delete-user",title:"Delete User"},{footer:(0,o.withCtx)((function(e){return[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{onClick:function(t){return v.destroy(e.data.id)},variant:"danger",class:"ml-3"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Delete")]}),void 0,!0),_:2},1032,["onClick"])),[[R,void 0,"delete-user"]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(C,{variant:"secondary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Cancel")]}),void 0,!0),_:1})),[[R,void 0,"delete-user"]])]})),default:(0,o.withCtx)((function(){return[f]}),void 0,!0),_:1})]}),void 0,!0),_:1})])}]])}}]);