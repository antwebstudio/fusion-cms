"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[1154],{1154:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var r=t(3802),o=["for","innerHTML"];var i=t(3361);const c={name:"replicator-fieldtype",data:function(){return{replicants:_.defaultTo(this.value,[]),sections:[],active:0}},props:{field:{type:Object,required:!0},value:{type:Array,required:!1,default:function(){return[]}},errors:{type:Object,required:!1,default:function(){}}},watch:{replicants:function(e){this.$emit("input",e)}},methods:{fieldErrors:function(e){var n=_.has(this.errors,"errors")?this.errors.errors:{};return n=_.pickBy(n,(function(n,t){return _.startsWith(t,e)})),n=_.mapKeys(n,(function(n,t){return _.replace(t,e,"")})),new i.Z(n)},_errorMessage:function(e){return this.errors?this.errors.get(e):""},fields:function(e){var n=_.findIndex(this.sections,(function(n){return n.id==e.id}));return-1!=n?this.sections[n].fields:[]},add:function(e){var n=this.sections[e],t={};_.each(n.fields,(function(e){return t[e.handle]=e.default})),this.replicants.push({section:n,fields:t})},move:function(e,n){this.replicants.splice(n,0,this.replicants.splice(e,1)[0])},remove:function(e){this.replicants.length>0&&this.replicants.splice(e,1)}},created:function(){var e=this;axios.get("/api/replicators/".concat(this.field.settings.replicator)).then((function(n){return e.sections=n.data.data.sections}))}};const l=(0,t(3744).Z)(c,[["render",function(e,n,t,i,c,l){var s=(0,r.resolveComponent)("fa-icon"),a=(0,r.resolveComponent)("ui-button"),u=(0,r.resolveComponent)("ui-tab"),d=(0,r.resolveComponent)("ui-tabs");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("label",{class:"form__label",for:t.field.handle,innerHTML:t.field.name},null,8,o),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.sections,(function(e,n){return(0,r.openBlock)(),(0,r.createBlock)(a,{key:e.handle,variant:"secondary",class:"mr-2",onClick:function(e){return l.add(n)}},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)((0,r.toDisplayString)(e.name)+" ",1),(0,r.createVNode)(s,{icon:"plus",class:"fa-xs"})]}),void 0,!0),_:2},1032,["onClick"])})),128)),(0,r.createVNode)(d,{move:l.move},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.replicants,(function(e,n){return(0,r.openBlock)(),(0,r.createBlock)(u,{key:"replicant-".concat(n,"-tab"),name:"[".concat(n+1,"] ").concat(e.section.name),remove:l.remove},{default:(0,r.withCtx)((function(){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.fields(e.section),(function(o){return(0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(o.type.id+"-fieldtype"),{key:o.handle,class:"form__group",field:o,errors:l.fieldErrors("".concat(t.field.handle,".").concat(n,".fields.")),modelValue:e.fields[o.handle],"onUpdate:modelValue":function(n){return e.fields[o.handle]=n}},null,8,["field","errors","modelValue","onUpdate:modelValue"])})),128))]}),void 0,!0),_:2},1032,["name","remove"])})),128))]}),void 0,!0),_:1},8,["move"])])}]])}}]);