"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[8548],{8548:(e,t,l)=>{l.r(t),l.d(t,{default:()=>U});var o=l(3802),r={class:"row"},n={class:"logs__sidebar side-container"},a={class:"card"},c=(0,o.createElementVNode)("div",{class:"card-header px-3 pt-2"},[(0,o.createElementVNode)("h4",{class:"mb-0"},"Available Logs")],-1),i=(0,o.createElementVNode)("hr",null,null,-1),s={class:"card-body"},d={key:0,class:"block px-3 py-2"},m={key:1,class:"block px-3 py-2"},p={class:"logs__main content-container"},u={class:"card"},f=(0,o.createElementVNode)("div",{class:"card-header px-4 py-2"},[(0,o.createElementVNode)("h2",{class:"mb-0"},"Log Entries"),(0,o.createElementVNode)("h3",{class:"text-xs"},"Click an entry to view full error and stack trace")],-1),k={class:"container"},v={key:0},E=["onClick"],g={class:"px-2 py-1 flex-shrink-0 flex items-center"},N=["title"],V={class:"sr-only"},x={class:"px-3 py-1 flex-shrink-0 flex items-center text-xs whitespace-nowrap"},y={class:"col px-3 py-1 leading-tight overflow-hidden"},h=["innerHTML"],B={key:0,class:"truncate pt-2 text-xs text-gray-600"},w={key:1,class:"block px-3 py-4"},C={key:0},b={key:2,class:"block px-3 py-4"},_={key:0},F={class:"leading-tight mb-3"},L={class:"flex p-2"},D=(0,o.createElementVNode)("div",{class:"pr-2 whitespace-nowrap"},[(0,o.createElementVNode)("strong",null,"Timestamp:")],-1),T={class:"whitespace-nowrap"},S={class:"flex p-2"},q=(0,o.createElementVNode)("div",{class:"pr-2 whitespace-nowrap"},[(0,o.createElementVNode)("strong",null,"Error Text:")],-1),H={class:"logs__full-text"},M={class:"text-warning-800"},R={class:"px-2"},$=(0,o.createElementVNode)("h3",{class:"text-sm"},"Stack Trace:",-1),z={class:"logs__stack-trace overflow-auto"};const A={head:{title:function(){return{inner:"Logs"}}},data:function(){return{endpoint:"/datatable/matrices",currentFile:"",files:[],logs:[],currentError:{},loaded:!1}},computed:{file:function(){return(this.$route.query?this.$route.query:"").file}},beforeRouteEnter:function(e,t,l){l((function(t){t.getFile(e.query.file)}))},beforeRouteUpdate:function(e,t,l){this.getFile(e.query.file),l()},methods:{getFile:function(e){var t=this;t.loaded=!1;var l=e?"?l="+e:"";axios.get("/api/logs"+l).then((function(e){t.currentFile=e.data.currentFile,t.files=e.data.files,t.logs=e.data.logs,t.loaded=!0}))},changeCurrentError:function(e){this.currentError=e}}};const U=(0,l(3744).Z)(A,[["render",function(e,t,l,A,U,Z){var j=(0,o.resolveComponent)("page-title"),G=(0,o.resolveComponent)("portal"),I=(0,o.resolveComponent)("router-link"),J=(0,o.resolveComponent)("fa-icon"),K=(0,o.resolveComponent)("ui-modal"),O=(0,o.resolveDirective)("modal");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(G,{to:"title"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(j,{icon:"bug"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Logs")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",a,[c,i,(0,o.createElementVNode)("div",s,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(U.files,(function(e,t){return(0,o.openBlock)(),(0,o.createBlock)(I,{to:{path:"logs?",query:{file:e}},key:t,class:"block px-3 py-2 text-gray-900"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(e),1)]}),void 0,!0),_:2},1032,["to"])})),128)),U.loaded||0!=U.files.length?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",d,[(0,o.createTextVNode)(" Loading log files "),(0,o.createVNode)(J,{icon:"cog",class:"fa-spin ml-2"})])),U.loaded&&0==U.files.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",m," No logs found ")):(0,o.createCommentVNode)("",!0)])])]),(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",u,[f,(0,o.createElementVNode)("div",k,[U.loaded?((0,o.openBlock)(),(0,o.createElementBlock)("div",v,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(U.logs,(function(e){return(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e,class:"logs__row flex flex-nowrap py-2",onClick:function(t){return Z.changeCurrentError(e)}},[(0,o.createElementVNode)("div",g,[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)("d-flex whitespace-nowrap text-"+e.level.status+"-600"),title:e.level.name},[(0,o.createVNode)(J,{icon:["fas",e.level.icon],class:"fa-inverse! fa-fw"},null,8,["icon"]),(0,o.createElementVNode)("span",V,(0,o.toDisplayString)(e.level.name),1)],10,N)]),(0,o.createElementVNode)("div",x,(0,o.toDisplayString)(e.date),1),(0,o.createElementVNode)("div",y,[(0,o.createElementVNode)("div",{class:"text-md",innerHTML:e.text},null,8,h),e.inFile?((0,o.openBlock)(),(0,o.createElementBlock)("div",B,(0,o.toDisplayString)(e.inFile),1)):(0,o.createCommentVNode)("",!0)])],8,E)),[[O,void 0,"error-view"]])})),128))])):(0,o.createCommentVNode)("",!0),U.loaded?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",w,[(0,o.createTextVNode)(" Loading file "),Z.file?((0,o.openBlock)(),(0,o.createElementBlock)("code",C,(0,o.toDisplayString)(Z.file),1)):(0,o.createCommentVNode)("",!0),(0,o.createTextVNode)(),(0,o.createVNode)(J,{icon:"cog",class:"fa-spin ml-3"})])),U.loaded&&0==U.logs.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",b," Log file empty ")):(0,o.createCommentVNode)("",!0)])])])]),(0,o.createVNode)(K,{name:"error-view",title:"Error Details","extra-large":""},{default:(0,o.withCtx)((function(){return[U.currentError.date?((0,o.openBlock)(),(0,o.createElementBlock)("div",_,[(0,o.createElementVNode)("div",F,[(0,o.createElementVNode)("div",L,[D,(0,o.createElementVNode)("div",T,(0,o.toDisplayString)(U.currentError.date),1)]),(0,o.createElementVNode)("div",S,[q,(0,o.createElementVNode)("div",H,[(0,o.createElementVNode)("div",M,(0,o.toDisplayString)(U.currentError.textFull),1)])])]),(0,o.createElementVNode)("div",R,[$,(0,o.createElementVNode)("div",z,[e.row.length?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(U.currentError.stackTrace,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e,class:"logs__stack-row"},(0,o.toDisplayString)(e),1)})),128)):(0,o.createCommentVNode)("",!0)])])])):(0,o.createCommentVNode)("",!0)]}),void 0,!0),_:1})])}]])}}]);