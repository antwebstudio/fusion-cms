"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[1401],{1401:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Se});var n=r(3802),o={class:"h-full max-h-full"},l={key:0,class:"row mb-6"},a={class:"col w-full"},s={class:"row md:h-full"},c={class:"content-container",style:{"margin-bottom":"0 !important"}},i={class:"card md:h-full flex flex-1"};var d=r(6486),p=r.n(d),m=r(4332),f=r(3907),u={class:"inbox__response-list"},g={class:"inbox__response-list__pagination"},b={key:0,class:"absolute w-full pin-t p-2 text-sm flex justify-center items-center bg-gray-900 text-gray-100 rounded-b"},v=["onClick"],y={class:"px-4 py-6 border-b border-gray-200"},x={class:"flex"},h={class:"mr-3 flex flex-col"},k={class:"w-full"},V={class:"flex justify-between items-center mb-2"},w={class:"block text-gray-600 text-sm"},N={class:"text-gray-800"},E={key:1,class:"text-center p-6 leading-relaxed text-gray-600"},O=[(0,n.createElementVNode)("p",null,[(0,n.createTextVNode)(" This form's inbox is empty."),(0,n.createElementVNode)("br"),(0,n.createElementVNode)("b",null,"Try checking back at a later time.")],-1)];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const C={name:"response-list",computed:j(j({},(0,f.Se)({totalPages:"inbox/getTotalPages",responses:"inbox/getResponses",response:"inbox/getResponse",loading:"inbox/getLoading"})),{},{page:{set:function(e){this.$store.commit("inbox/setPage",e)},get:function(){return this.$store.getters["inbox/getPage"]}},pageOptions:function(){for(var e=[],t=1;t<=this.totalPages;t++)e.push({label:t.toString(),value:t});return e}}),watch:{page:function(){this.fetchResponses()}},methods:j(j({},(0,f.nv)({prevPage:"inbox/prevPage",nextPage:"inbox/nextPage",firstPage:"inbox/firstPage",lastPage:"inbox/lastPage",jumpPage:"inbox/jumpPage"})),{},{fetchResponses:function(){this.$store.dispatch("inbox/fetchResponses")},select:function(e){this.$store.dispatch("inbox/selectResponse",e)},isSelected:function(e){return!!this.response&&this.response.id==e.id}})};var _=r(3744);const S=(0,_.Z)(C,[["render",function(e,t,r,o,l,a){var s=(0,n.resolveComponent)("fa-icon"),c=(0,n.resolveComponent)("ui-select-group");return(0,n.openBlock)(),(0,n.createElementBlock)("div",u,[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("a",{href:"#",onClick:t[0]||(t[0]=(0,n.withModifiers)((function(){return e.firstPage&&e.firstPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,n.createVNode)(s,{icon:["fas","angle-double-left"],class:"fa-fw"})]),(0,n.createElementVNode)("a",{href:"#",onClick:t[1]||(t[1]=(0,n.withModifiers)((function(){return e.prevPage&&e.prevPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,n.createVNode)(s,{icon:["fas","angle-left"],class:"fa-fw"})]),(0,n.createVNode)(c,{label:"Page","hide-label":"",class:"m-0 w-full px-4",name:"page",filterable:"",modelValue:a.page,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.page=e}),options:a.pageOptions},null,8,["modelValue","options"]),(0,n.createElementVNode)("a",{href:"#",onClick:t[3]||(t[3]=(0,n.withModifiers)((function(){return e.nextPage&&e.nextPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,n.createVNode)(s,{icon:["fas","angle-right"],class:"fa-fw"})]),(0,n.createElementVNode)("a",{href:"#",onClick:t[4]||(t[4]=(0,n.withModifiers)((function(){return e.lastPage&&e.lastPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,n.createVNode)(s,{icon:["fas","angle-double-right"],class:"fa-fw"})])]),e.loading?((0,n.openBlock)(),(0,n.createElementBlock)("div",b,[(0,n.createVNode)(s,{icon:["fas","circle-notch"],class:"fa-spin mr-3"}),(0,n.createTextVNode)(" Loading responses... ")])):(0,n.createCommentVNode)("",!0),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.responses,(function(t){return(0,n.openBlock)(),(0,n.createElementBlock)("a",{href:"#",onClick:(0,n.withModifiers)((function(e){return a.select(t)}),["prevent"]),class:(0,n.normalizeClass)(["lg:border-r-4 block hover:bg-gray-100 text-gray-700 hover:text-gray-900",{"border-primary-400":a.isSelected(t),"border-gray-200":!a.isSelected(t)}]),key:t.id},[(0,n.createElementVNode)("div",y,[(0,n.createElementVNode)("div",x,[(0,n.createElementVNode)("div",h,[(0,n.createVNode)(s,{icon:["far","star"],"fixed-width":"",class:"mb-2"}),(0,n.createVNode)(s,{icon:["far","check-circle"],"fixed-width":""})]),(0,n.createElementVNode)("div",k,[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("b",null,(0,n.toDisplayString)(t.identifiable_email_address),1),(0,n.createElementVNode)("span",w,(0,n.toDisplayString)(e.$moment(t.created_at).format("L")),1)]),(0,n.createElementVNode)("div",N," Re: "+(0,n.toDisplayString)(t.form.name),1)])])])],10,v)})),128)),0!=e.responses.length||e.loading?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",E,O))])}]]);var D={class:"leading-none flex-1 flex"},F={key:0,class:"w-full"},$={class:"flex flex-row-reverse border-b py-4 px-6 justify-between items-center",style:{height:"52px"}},L=(0,n.createElementVNode)("div",null,null,-1),R={class:"text-gray-500 flex items-center"},q={class:"text-xs font-mono ml-2"},T={class:"border-b p-6 tracking-wide"},Z={class:"text-lg font-bold"},M={class:"mt-3 text-sm"},z={class:"flex mb-1"},I=(0,n.createElementVNode)("div",{class:"text-gray-700",style:{width:"75px"}},"Regarding",-1),A={class:"flex-grow"},U={class:"flex"},G=(0,n.createElementVNode)("div",{class:"text-gray-700",style:{width:"75px"}},"Date",-1),H={class:"flex-grow"},J={class:"flex border-b p-6 tracking-wide justify-between items-center"},K={class:"flex flex-col text-lg"},Q={class:"mb-2"},W={class:"text-sm"},X={class:"p-6 leading-loose"},Y=["for"],ee=["id"],te={key:0,class:"bg-white shadow rounded-md mt-2"},re={class:"p-2 sm:px-4"},ne={class:"flex items-center justify-between"},oe=["src","alt"],le=["src","alt"],ae=["textContent"],se=["textContent"],ce={key:1},ie={key:1,class:"h-full flex flex-1 justify-center items-center text-5xl text-gray-300"};function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const fe={name:"response-view",mixins:[r(8273).Z],computed:pe({},(0,f.Se)({response:"inbox/getResponse",fields:"inbox/getFields"})),methods:pe({},(0,f.nv)({}))},ue=(0,_.Z)(fe,[["render",function(e,t,r,o,l,a){var s=(0,n.resolveComponent)("fa-icon"),c=(0,n.resolveComponent)("mq-layout"),i=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("div",D,[e.response.id?((0,n.openBlock)(),(0,n.createElementBlock)("div",F,[(0,n.createElementVNode)("div",$,[L,(0,n.createElementVNode)("div",R,[(0,n.createVNode)(s,{icon:["fas","server"],"fixed-width":""}),(0,n.createTextVNode)(),(0,n.createElementVNode)("span",q,(0,n.toDisplayString)(e.response.identifiable_ip_address),1)])]),(0,n.createVNode)(c,{mq:"sm"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",T,[(0,n.createElementVNode)("div",Z,(0,n.toDisplayString)(e.response.identifiable_email_address),1),(0,n.createElementVNode)("div",M,[(0,n.createElementVNode)("div",z,[I,(0,n.createElementVNode)("div",A,(0,n.toDisplayString)(e.response.form.name),1)]),(0,n.createElementVNode)("div",U,[G,(0,n.createElementVNode)("div",H,(0,n.toDisplayString)(e.$moment(e.response.created_at).format("LLL")),1)])])])]}),void 0,!0),_:1}),(0,n.createVNode)(c,{mq:"md+"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",J,[(0,n.createElementVNode)("div",K,[(0,n.createElementVNode)("b",Q,(0,n.toDisplayString)(e.response.identifiable_email_address),1),(0,n.createElementVNode)("span",null,"Re: "+(0,n.toDisplayString)(e.response.form.name),1)]),(0,n.createElementVNode)("div",W,(0,n.toDisplayString)(e.$moment(e.response.created_at).format("LLL")),1)])]}),void 0,!0),_:1}),(0,n.createElementVNode)("div",X,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.fields,(function(t){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"form__group",key:t.handle},[(0,n.createElementVNode)("label",{for:t.handle,class:"form__label"},(0,n.toDisplayString)(t.name),9,Y),(0,n.createElementVNode)("div",{id:t.handle},["file"==t.type.id?((0,n.openBlock)(),(0,n.createElementBlock)("div",te,[(0,n.createElementVNode)("ul",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.response[t.handle],(function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:"file.".concat(r)},[(0,n.createElementVNode)("div",re,[(0,n.createElementVNode)("div",ne,[(0,n.createVNode)(i,{to:"/files/"+t.uuid},{default:(0,n.withCtx)((function(){return["image"==t.type?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,class:"upload__file--preview max-w-12",src:t.url,alt:t.name},null,8,oe)):((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:1,class:"upload__file--preview max-w-12",src:"/vendor/fusion/img/".concat(t.type,"-large.svg"),alt:t.name},null,8,le))]}),void 0,!0),_:2},1032,["to"]),(0,n.createElementVNode)("div",{class:"upload__file--name",textContent:(0,n.toDisplayString)(t.name)},null,8,ae),(0,n.createElementVNode)("div",{class:"upload__file--size",textContent:(0,n.toDisplayString)(e.filesize(t.bytes))},null,8,se)])])])})),128))])])):((0,n.openBlock)(),(0,n.createElementBlock)("p",ce,(0,n.toDisplayString)(e.response[t.handle]),1))],8,ee)])})),128))])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",ie,[(0,n.createVNode)(s,{icon:["far","envelope"],class:"fa-fw fa-3x"})]))])}]]);var ge={class:"inbox__filter-sidebar"},be={class:"card h-full"},ve={class:"card__body"},ye={class:"list"},xe={key:0,class:"list"},he=[(0,n.createElementVNode)("span",{class:"list--separator pt-0"},"Inboxes",-1),(0,n.createElementVNode)("span",{class:"px-2 text-gray-600 leading-loose"},"No forms available.",-1)],ke={key:1,class:"list"},Ve=(0,n.createElementVNode)("span",{class:"list--separator pt-0"},"Forms",-1),we=["onClick"];function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Pe={name:"filter-sidebar",computed:Ee({},(0,f.Se)({forms:"inbox/getForms",form:"inbox/getForm"})),methods:Ee(Ee({},(0,f.nv)({select:"inbox/selectForm"})),{},{isSelected:function(e){return!!this.form&&this.form.id==e.id}})};function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _e={auth:function(){return{permission:"responses.viewAny"}},head:{title:function(){return{inner:"Inbox"}}},components:{"response-list":S,"response-view":ue,"filter-sidebar":(0,_.Z)(Pe,[["render",function(e,t,r,o,l,a){var s=(0,n.resolveComponent)("fa-icon");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ge,[(0,n.createElementVNode)("div",be,[(0,n.createElementVNode)("div",ve,[(0,n.createElementVNode)("div",ye,[0==e.forms.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",xe,he)):((0,n.openBlock)(),(0,n.createElementBlock)("div",ke,[Ve,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.forms,(function(t){return(0,n.openBlock)(),(0,n.createElementBlock)("a",{key:t.handle,href:"#",class:(0,n.normalizeClass)(["list--item leading-loose",{"router-link-active":a.isSelected(t)}]),onClick:(0,n.withModifiers)((function(r){return e.select(t)}),["prevent"])},[(0,n.createVNode)(s,{icon:["fas","inbox"],"fixed-width":"",class:"mr-2"}),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(t.name),1)],10,we)})),128))]))])])])])}]])},computed:Be({},(0,f.Se)({response:"inbox/getResponse"})),methods:Be({},(0,f.nv)({clear:"inbox/clearResponse"})),beforeRouteEnter:function(e,t,r){m.Z.dispatch("inbox/fetchForms").then((function(e){m.Z.getters["inbox/getForms"].length&&m.Z.dispatch("inbox/selectForm",p().head(m.Z.getters["inbox/getForms"])),r()}))}},Se=(0,_.Z)(_e,[["render",function(e,t,r,d,p,m){var f=(0,n.resolveComponent)("page-title"),u=(0,n.resolveComponent)("portal"),g=(0,n.resolveComponent)("ui-button"),b=(0,n.resolveComponent)("fa-icon"),v=(0,n.resolveComponent)("ui-card"),y=(0,n.resolveComponent)("filter-sidebar"),x=(0,n.resolveComponent)("response-list"),h=(0,n.resolveComponent)("response-view");return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createVNode)(u,{to:"title"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(f,{icon:"inbox"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Inbox")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,n.createVNode)(u,{to:"actions"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(g,{variant:"primary",to:{name:"forms"}},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Manage Forms")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),"sm"==e.$mq&&e.response.id?((0,n.openBlock)(),(0,n.createElementBlock)("div",l,[(0,n.createElementVNode)("div",a,[(0,n.createVNode)(v,{class:"flex items-center justify-between"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("a",{href:"#",onClick:t[0]||(t[0]=(0,n.withModifiers)((function(){return e.clear&&e.clear.apply(e,arguments)}),["prevent"])),class:"rounded p-2 hover:bg-gray-100 text-gray-900 border border-gray-300"},[(0,n.createVNode)(b,{icon:["fas","arrow-left"],class:"fa-fw"})])]}),void 0,!0),_:1})])])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",s,["sm"==e.$mq&&!e.response.id||"sm"!=e.$mq?((0,n.openBlock)(),(0,n.createBlock)(y,{key:0})):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("div",i,["sm"==e.$mq&&!e.response.id||"sm"!=e.$mq?((0,n.openBlock)(),(0,n.createBlock)(x,{key:0})):(0,n.createCommentVNode)("",!0),"sm"==e.$mq&&e.response.id||"sm"!=e.$mq?((0,n.openBlock)(),(0,n.createBlock)(h,{key:1})):(0,n.createCommentVNode)("",!0)])])])])}]])}}]);