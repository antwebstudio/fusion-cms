"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[2115],{2115:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c,getRole:()=>l});var n=o(3802),r={class:"roles-page"},i={class:"buttons"},a={class:"flex items-center"};const s={auth:function(){return{permission:"roles.view"}},head:{title:function(){return{inner:this.role.name||"Loading..."}}},data:function(){return{role:{}}},beforeRouteEnter:function(e,t,o){l(e.params.role,(function(e,t){o(e?function(t){t.$router.push("/roles"),toast(e.toString(),"danger")}:function(e){e.role=t,e.$emit("updateHead")})}))},computed:{endpoint:function(){return this.role?"/datatable/users/".concat(this.role.name):"/datatable/users"},permissions:function(){return!!this.role.id&&"/datatable/roles/".concat(this.role.id,"/permissions")},isOwner:function(){return this.role.id&&1===this.role.id},isGuest:function(){return this.role.id&&2===this.role.id},canEdit:function(){return this.$can("roles.update",this.role.level?this.role.level:0)}}};function l(e,t){axios.get("/api/roles/".concat(e)).then((function(e){t(null,e.data.data)})).catch((function(e){t(new Error("The requested role could not be found"))}))}const c=(0,o(3744).Z)(s,[["render",function(e,t,o,s,l,c){var d=(0,n.resolveComponent)("page-title"),u=(0,n.resolveComponent)("portal"),p=(0,n.resolveComponent)("ui-button"),m=(0,n.resolveComponent)("status-card"),f=(0,n.resolveComponent)("sidebar"),h=(0,n.resolveComponent)("ui-status"),v=(0,n.resolveComponent)("router-link"),w=(0,n.resolveComponent)("ui-badge"),C=(0,n.resolveComponent)("ui-date"),x=(0,n.resolveComponent)("ui-table"),g=(0,n.resolveComponent)("section-card");return(0,n.openBlock)(),(0,n.createElementBlock)("div",r,[(0,n.createVNode)(u,{to:"title"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(d,{icon:"user-shield",subtitle:l.role.description},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Role - "+(0,n.toDisplayString)(l.role.name),1)]}),void 0,!0),_:1},8,["subtitle"])]}),void 0,!0),_:1}),(0,n.createVNode)(u,{to:"actions"},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",i,["sm"!=e.$mq?((0,n.openBlock)(),(0,n.createBlock)(p,{key:"go-back-btn",to:{name:"roles"},variant:"secondary"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Go Back")]}),void 0,!0),_:1})):(0,n.createCommentVNode)("",!0),c.canEdit?((0,n.openBlock)(),(0,n.createBlock)(p,{key:"edit-role-btn",to:{name:"roles.edit",params:{role:l.role.id}},variant:"primary"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Edit Role")]}),void 0,!0),_:1},8,["to"])):(0,n.createCommentVNode)("",!0)])]}),void 0,!0),_:1}),(0,n.createVNode)(u,{to:"sidebar-right"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(f,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(m,{id:"role_panel_status_card",entry:l.role,tabindex:"-1"},null,8,["entry"])]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,n.createVNode)(g,{id:"roles_panel_users",grid:!1,title:"Assigned Users",description:"Users currently assigned to this role.",tabindex:"-1"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(x,{id:"users",key:"'roles-table'",endpoint:c.endpoint,"sort-by":"name","no-search":c.isOwner,"no-actions":"","show-page-status":"","show-page-numbers":"","show-page-nav":"","show-page-ends":""},{name:(0,n.withCtx)((function(e){return[(0,n.createElementVNode)("div",a,[(0,n.createVNode)(h,{value:e.record.status,class:"mr-2"},null,8,["value"]),(0,n.createVNode)(v,{to:{name:"users.show",params:{user:e.record.id}}},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.record.name),1)]}),void 0,!0),_:2},1032,["to"])])]})),email:(0,n.withCtx)((function(e){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.record.email),1)]})),role:(0,n.withCtx)((function(e){return[(0,n.createVNode)(w,null,{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.record.role.name),1)]}),void 0,!0),_:2},1024)]})),created_at:(0,n.withCtx)((function(e){return[(0,n.createVNode)(C,{timestamp:e.record.created_at},null,8,["timestamp"])]})),email_verified_at:(0,n.withCtx)((function(e){return[e.record.email_verified_at?((0,n.openBlock)(),(0,n.createBlock)(w,{key:0,variant:"success"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("Yes")]}),void 0,!0),_:1})):((0,n.openBlock)(),(0,n.createBlock)(w,{key:1,variant:"danger"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)("No")]}),void 0,!0),_:1}))]})),_:1},8,["endpoint","no-search"])]}),void 0,!0),_:1}),!c.isOwner&&c.permissions?((0,n.openBlock)(),(0,n.createBlock)(g,{key:0,id:"roles_panel_permissions",grid:!1,title:"Assigned Permissions",description:"permissions currently assigned to this role.",tabindex:"-1"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(x,{id:"permissions",key:"permissions-table",endpoint:c.permissions,"sort-by":"name","no-actions":"","show-page-status":"","show-page-numbers":"","show-page-nav":"","show-page-ends":""},{name:(0,n.withCtx)((function(e){return[(0,n.createElementVNode)("code",null,(0,n.toDisplayString)(e.record.name),1)]})),description:(0,n.withCtx)((function(e){return[(0,n.createElementVNode)("p",null,(0,n.toDisplayString)(e.record.description),1)]})),_:1},8,["endpoint"])]}),void 0,!0),_:1})):(0,n.createCommentVNode)("",!0)])}]])}}]);