"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[7013],{7013:(e,t,o)=>{o.r(t),o.d(t,{default:()=>D});var r=o(3802),i={class:"buttons"},a={class:"card__body flex items-center justify-center"},n={key:0},l={key:1,class:"w-full"},c={ref:"player",controls:"",crossorigin:""},s=["src","type"],d={key:2},f={controls:""},u=["src","type"],m={key:3},p=(0,r.createElementVNode)("div",{class:"text-center px-6 py-3 rounded border border-gray-400 bg-gray-200 text-gray-800"}," No preview available ",-1),h={key:1,class:"card"},v=[(0,r.createElementVNode)("div",{class:"card__body text-center text-sm text-gray-800"},[(0,r.createTextVNode)(" If you intend on serving this video on your website, it's highly recommended that you use a 3rd party service such as "),(0,r.createElementVNode)("a",{href:""},"Youtube"),(0,r.createTextVNode)(" or "),(0,r.createElementVNode)("a",{href:""},"Vimeo"),(0,r.createTextVNode)(". ")],-1)],g={class:"card"},y={class:"card__body"},k={class:"card"},V={class:"card__body"};var b=o(1443),w=o.n(b),N=o(8401),x=o(8273),C=o(3907);function B(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?B(Object(o),!0).forEach((function(t){_(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const T={auth:function(){return{permission:"files.view"}},head:{title:function(){return{inner:this.file.name||"Loading..."}}},mixins:[x.Z],data:function(){return{file:{},form:new N.Z,player:null,loaded:!1}},computed:E({},(0,C.Se)({disk:"filemanager/getDisk"})),watch:{file:{handler:function(e){var t=this;this.$nextTick((function(){t.player=new(w())(t.$refs.player,{title:t.file.name,ratio:"16:9",controls:["play-large","restart","play","progress","current-time","duration","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["quality","loop"]})}))},deep:!0}},methods:E(E({},(0,C.nv)({fetchDisk:"filemanager/fetchDisk",toggleSelection:"filemanager/toggleFileSelection"})),{},{getFile:function(e,t,o){var r=this;axios.get("/api/files/".concat(e.params.disk,"/").concat(e.params.file)).then((function(e){r.file=e.data.data,r.loaded=!0,r.form=new N.Z({name:r.file.name,title:r.file.title,alt:r.file.alt,caption:r.file.caption}),r.toggleSelection(r.file.id),r.$emit("updateHead")}))},submit:function(){var e=this;this.form.patch("/api/files/".concat(this.disk.id,"/").concat(this.file.id)).then((function(t){e.file.name=e.form.name,toast("The file's information was successfully updated","success")})).catch((function(e){toast(e.response.data.message,"danger")}))},back:function(){this.$router.push({name:"file-manager.index"})},download:function(){var e=this;axios({url:"/api/files/".concat(this.disk.id,"/").concat(this.file.id,"/download"),method:"GET",responseType:"blob"}).then((function(t){var o=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=o,r.setAttribute("download","".concat(e.file.name,".").concat(e.file.extension)),document.body.appendChild(r),r.click()}))}}),beforeRouteEnter:function(e,t,o){o((function(r){r.fetchDisk(e.params.disk),r.getFile(e,t,o)}))},beforeRouteUpdate:function(e,t,o){this.fetchDisk(e.params.disk),this.getFile(e,t,o),o()}};const D=(0,o(3744).Z)(T,[["render",function(e,t,o,b,w,N){var x=(0,r.resolveComponent)("page-title"),C=(0,r.resolveComponent)("portal"),B=(0,r.resolveComponent)("ui-button"),E=(0,r.resolveComponent)("move-file-modal"),_=(0,r.resolveComponent)("replace-file-modal"),T=(0,r.resolveComponent)("delete-file-modal"),D=(0,r.resolveComponent)("ui-img"),O=(0,r.resolveComponent)("ui-slug-group"),S=(0,r.resolveComponent)("ui-input-group"),j=(0,r.resolveComponent)("ui-textarea-group"),P=(0,r.resolveComponent)("ui-definition"),U=(0,r.resolveComponent)("ui-definition-list"),R=(0,r.resolveComponent)("form-container"),F=(0,r.resolveDirective)("modal");return(0,r.openBlock)(),(0,r.createBlock)(R,null,{sidebar:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",y,[(0,r.createVNode)(O,{name:"name",label:"Filename",autofocus:"",required:"",autocomplete:"off",help:"The filename dictates the Share URL below.",placeholder:"Filename","has-error":w.form.errors.has("name"),"error-message":w.form.errors.get("name"),modelValue:w.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return w.form.name=e})},null,8,["has-error","error-message","modelValue"]),(0,r.createVNode)(S,{name:"title",label:"Title",autocomplete:"off",help:"The title targets the title html attributes, which is a nice-to-have feature.",placeholder:"Title (optional)","has-error":w.form.errors.has("title"),"error-message":w.form.errors.get("title"),modelValue:w.form.title,"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.form.title=e})},null,8,["has-error","error-message","modelValue"]),(0,r.createVNode)(S,{name:"alt",label:"Alt",autocomplete:"off",placeholder:"Alt (optional)",help:"This value targets the alt html attributes, required for accessibility.","has-error":w.form.errors.has("alt"),"error-message":w.form.errors.get("alt"),modelValue:w.form.alt,"onUpdate:modelValue":t[3]||(t[3]=function(e){return w.form.alt=e})},null,8,["has-error","error-message","modelValue"]),(0,r.createVNode)(j,{name:"caption",label:"Caption",help:"This caption is used for image captions to give users more information.",placeholder:"Caption (optional)","has-error":w.form.errors.has("caption"),"error-message":w.form.errors.get("caption"),modelValue:w.form.caption,"onUpdate:modelValue":t[4]||(t[4]=function(e){return w.form.caption=e})},null,8,["has-error","error-message","modelValue"])])]),(0,r.createElementVNode)("div",k,[(0,r.createElementVNode)("div",V,[(0,r.createVNode)(S,{name:"share",readonly:"",label:"Share",class:"text-sm",value:w.file.url},null,8,["value"])])]),w.file.created_at?((0,r.openBlock)(),(0,r.createBlock)(U,{key:0},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(P,{name:"Size"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)((0,r.toDisplayString)(w.file.bytes|e.bytes),1)]}),void 0,!0),_:1}),(0,r.createVNode)(P,{name:"Mimetype"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)((0,r.toDisplayString)(w.file.mimetype),1)]}),void 0,!0),_:1}),w.file.dimensions?((0,r.openBlock)(),(0,r.createBlock)(P,{key:0,name:"Dimensions"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)((0,r.toDisplayString)(w.file.dimensions.width)+" x "+(0,r.toDisplayString)(w.file.dimensions.height),1)]}),void 0,!0),_:1})):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(P,{name:"Last Modified"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)((0,r.toDisplayString)(e.$moment(w.file.created_at.date).format("L")),1)]}),void 0,!0),_:1})]}),void 0,!0),_:1})):(0,r.createCommentVNode)("",!0)]})),default:(0,r.withCtx)((function(){return[(0,r.createVNode)(C,{to:"title"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(x,{icon:"image",textContent:(0,r.toDisplayString)(w.form.name)},null,8,["textContent"])]}),void 0,!0),_:1}),(0,r.createVNode)(C,{to:"actions"},{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("div",i,[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(B,{variant:"primary"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Delete")]}),void 0,!0),_:1})),[[F,void 0,"delete"]]),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(B,null,{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Move")]}),void 0,!0),_:1})),[[F,void 0,"move-file"]]),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(B,null,{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Replace")]}),void 0,!0),_:1})),[[F,void 0,"replace-file"]]),(0,r.createVNode)(B,{onClick:(0,r.withModifiers)(N.download,["prevent"])},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Download")]}),void 0,!0),_:1},8,["onClick"]),(0,r.createVNode)(B,{onClick:(0,r.withModifiers)(N.back,["prevent"])},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Go Back")]}),void 0,!0),_:1},8,["onClick"]),(0,r.createVNode)(B,{variant:"primary",onClick:(0,r.withModifiers)(N.submit,["prevent"])},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("Save")]}),void 0,!0),_:1},8,["onClick"])])]}),void 0,!0),_:1}),(0,r.createVNode)(C,{to:"modals"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(E),(0,r.createVNode)(_,{disk:e.disk,file:w.file,onReplaced:t[0]||(t[0]=function(e){return w.file=e})},null,8,["disk","file"]),(0,r.createVNode)(T,{disk:e.disk,file:w.file},null,8,["disk","file"])]}),void 0,!0),_:1}),w.loaded?((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"card",key:w.file.name},[(0,r.createElementVNode)("div",a,["image"==w.file.type?((0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)(D,{src:e.fileSrc(w.file,1500,1500,"max"),alt:w.file.alt,"background-color":"#ffffff",class:"rounded"},null,8,["src","alt"])])):"video"==w.file.type?((0,r.openBlock)(),(0,r.createElementBlock)("div",l,[(0,r.createElementVNode)("video",c,[(0,r.createElementVNode)("source",{src:w.file.url,type:w.file.mimetype,size:"576"},null,8,s)],512)])):"audio"==w.file.type?((0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createElementVNode)("audio",f,[(0,r.createElementVNode)("source",{src:w.file.url,type:w.file.mimetype},null,8,u)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",m,[(0,r.createVNode)(D,{src:"/vendor/fusion/img/"+w.file.type+"-small.svg","background-color":"#ffffff",width:200,height:200,alt:w.file.alt},null,8,["src","alt"]),p]))])])):(0,r.createCommentVNode)("",!0),"video"==w.file.type?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,v)):(0,r.createCommentVNode)("",!0)]}),void 0,!0),_:1})}]])}}]);