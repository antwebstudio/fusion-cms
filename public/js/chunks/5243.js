"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[5243],{5243:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s,getNavigation:()=>l});var o=n(3802),a={class:"navigation-page"};var r=n(8401);const i={auth:function(){return{permission:"navigation.update"}},head:{title:function(){return{inner:_.has(this.form,"name")?this.form.name:"Loading..."}}},data:function(){return{navigation:null,form:null,loading:!1}},components:{"shared-form":n(2031).Z},methods:{submit:function(){var e=this;this.loading=!0,this.form.patch("/api/navigation/".concat(this.navigation.id)).then((function(){axios.post("/api/blueprints/".concat(e.navigation.blueprint.id,"/sections"),{sections:e.form.sections}).then((function(){toast("Navigation successfully saved","success"),e.$router.push("/navigation")})).catch((function(t){toast(t.message,"failed"),e.loading=!1}))})).catch((function(t){toast(t.message,"failed"),e.loading=!1}))}},beforeRouteEnter:function(e,t,n){l(e.params.navigation,(function(e,t){n(e?function(t){t.$router.push("/navigation"),toast(e.toString(),"danger")}:function(e){e.navigation=t,e.form=new r.Z({name:t.name,handle:t.handle,description:t.description,sections:t.blueprint.sections},!0),e.$nextTick((function(){window.emitter.emit("updateHead")}))})}))}};function l(e,t){axios.get("/api/navigation/".concat(e)).then((function(e){t(null,e.data.data)})).catch((function(e){t(new Error("The requested navigation could not be found"))}))}const s=(0,n(3744).Z)(i,[["render",function(e,t,n,r,i,l){var s=(0,o.resolveComponent)("page-title"),d=(0,o.resolveComponent)("portal"),c=(0,o.resolveComponent)("shared-form");return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[(0,o.createVNode)(d,{to:"title"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(s,{icon:"anchor"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Edit Navigation")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),i.form?((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,loading:i.loading,form:i.form},null,8,["loading","form"])):(0,o.createCommentVNode)("",!0)])}]])},2031:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(3802),a={class:"buttons"},r={class:"row"},i={class:"col w-full lg:w-1/2"},l={class:"col w-full lg:w-1/2"};const s={data:function(){return{placements:[{label:"Body",value:"body"},{label:"Sidebar",value:"sidebar"}]}},props:{resource:{type:Object,required:!1,default:function(){}},form:{type:Object,required:!0},loading:{type:Boolean,required:!1}},methods:{handleSave:function(){this.$parent.submit()}},created:function(){this.$store.commit("fieldtypes/setStructure","navigation")}};const d=(0,n(3744).Z)(s,[["render",function(e,t,n,s,d,c){var u=(0,o.resolveComponent)("ui-button"),m=(0,o.resolveComponent)("portal"),f=(0,o.resolveComponent)("section-card"),p=(0,o.resolveComponent)("ui-input-group"),h=(0,o.resolveComponent)("ui-slug-group"),v=(0,o.resolveComponent)("ui-textarea-group"),g=(0,o.resolveComponent)("blueprint");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(m,{to:"actions"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",a,[(0,o.createVNode)(u,{to:{name:"navigation"},variant:"secondary"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Go Back")]}),void 0,!0),_:1}),(0,o.createVNode)(u,{type:"submit",onClick:(0,o.withModifiers)(c.handleSave,["prevent"]),variant:"primary",disabled:!n.form.hasChanges||n.loading},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Save")]}),void 0,!0),_:1},8,["onClick","disabled"])])]}),void 0,!0),_:1}),(0,o.withDirectives)((0,o.createVNode)(f,{title:"Loading..."},null,512),[[o.vShow,n.loading]]),(0,o.withDirectives)((0,o.createElementVNode)("div",null,[(0,o.createVNode)(f,{id:"navigation_panel_general",title:"General Information",description:"General information about your navigation menu and what it manages.",tabindex:"-1"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(p,{id:"navigation-name",name:"name",label:"Name",help:"What should this navigation menu be called?",autocomplete:"off",autofocus:"",required:"","has-error":n.form.errors.has("name"),"error-message":n.form.errors.get("name"),modelValue:n.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.form.name=e})},null,8,["has-error","error-message","modelValue"])]),(0,o.createElementVNode)("div",l,[(0,o.createVNode)(h,{id:"navigation-handle",name:"handle",label:"Handle",help:"A developer-friendly identifier.",monospaced:"",autocomplete:"off",required:"",delimiter:"_",watch:n.form.name,"has-error":n.form.errors.has("handle"),"error-message":n.form.errors.get("handle"),modelValue:n.form.handle,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.form.handle=e})},null,8,["watch","has-error","error-message","modelValue"])])]),(0,o.createVNode)(v,{id:"navigation-description",name:"description",label:"Description",help:"Give a short description of what this navigation menu will manage and store.",autocomplete:"off","has-error":n.form.errors.has("description"),"error-message":n.form.errors.get("description"),modelValue:n.form.description,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.form.description=e})},null,8,["has-error","error-message","modelValue"])]}),void 0,!0),_:1}),(0,o.createVNode)(f,{title:"Blueprint",description:"Configure this navigation's blueprint."},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(g,{placements:d.placements,form:n.form},null,8,["placements","form"])]}),void 0,!0),_:1})],512),[[o.vShow,!n.loading]])])}]])}}]);