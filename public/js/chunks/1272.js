"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[1272],{1272:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Re});var o=r(3802),n={class:"h-full max-h-full"},l={key:0,class:"row mb-6"},i={class:"col w-full"},a={class:"row md:h-full"},s={class:"content-container",style:{"margin-bottom":"0 !important"}},c={class:"card md:h-full flex flex-1"};var d=r(6486),m=r.n(d),f=r(4332),p=r(3907),u={class:"inbox__response-list"},b={class:"inbox__response-list__pagination"},y={key:0,class:"absolute w-full pin-t p-2 text-sm flex justify-center items-center bg-gray-900 text-gray-100 rounded-b"},g=["onClick"],v={class:"px-4 py-6 border-b border-gray-200"},x={class:"flex"},h={class:"mr-3 flex flex-col"},k={class:"w-full"},w={class:"flex justify-between items-center mb-2"},E={class:"block text-gray-600 text-sm"},N={class:"text-gray-800"},V={key:1,class:"text-center p-6 leading-relaxed text-gray-600"},O=[(0,o.createElementVNode)("p",null,[(0,o.createTextVNode)(" This form's inbox is empty."),(0,o.createElementVNode)("br"),(0,o.createElementVNode)("b",null,"Try checking back at a later time.")],-1)];function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const C={name:"response-list",computed:S(S({},(0,p.Se)({totalPages:"inbox/getTotalPages",responses:"inbox/getResponses",response:"inbox/getResponse",loading:"inbox/getLoading"})),{},{page:{set:function(e){this.$store.commit("inbox/setPage",e)},get:function(){return this.$store.getters["inbox/getPage"]}},pageOptions:function(){for(var e=[],t=1;t<=this.totalPages;t++)e.push({label:t.toString(),value:t});return e}}),watch:{page:function(){this.fetchResponses()}},methods:S(S({},(0,p.nv)({prevPage:"inbox/prevPage",nextPage:"inbox/nextPage",firstPage:"inbox/firstPage",lastPage:"inbox/lastPage",jumpPage:"inbox/jumpPage"})),{},{fetchResponses:function(){this.$store.dispatch("inbox/fetchResponses")},select:function(e){this.$store.dispatch("inbox/selectResponse",e)},isSelected:function(e){return!!this.response&&this.response.id==e.id}})};var _=r(3744);const D=(0,_.Z)(C,[["render",function(e,t,r,n,l,i){var a=(0,o.resolveComponent)("fa-icon"),s=(0,o.resolveComponent)("ui-select-group");return(0,o.openBlock)(),(0,o.createElementBlock)("div",u,[(0,o.createElementVNode)("div",b,[(0,o.createElementVNode)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.withModifiers)((function(){return e.firstPage&&e.firstPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,o.createVNode)(a,{icon:["fas","angle-double-left"],class:"fa-fw"})]),(0,o.createElementVNode)("a",{href:"#",onClick:t[1]||(t[1]=(0,o.withModifiers)((function(){return e.prevPage&&e.prevPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,o.createVNode)(a,{icon:["fas","angle-left"],class:"fa-fw"})]),(0,o.createVNode)(s,{label:"Page","hide-label":"",class:"m-0 w-full px-4",name:"page",filterable:"",modelValue:i.page,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.page=e}),options:i.pageOptions},null,8,["modelValue","options"]),(0,o.createElementVNode)("a",{href:"#",onClick:t[3]||(t[3]=(0,o.withModifiers)((function(){return e.nextPage&&e.nextPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,o.createVNode)(a,{icon:["fas","angle-right"],class:"fa-fw"})]),(0,o.createElementVNode)("a",{href:"#",onClick:t[4]||(t[4]=(0,o.withModifiers)((function(){return e.lastPage&&e.lastPage.apply(e,arguments)}),["prevent"])),class:"text-gray-700 hover:text-gray-900 text-lg m-1 p-3 hover:bg-gray-100 rounded"},[(0,o.createVNode)(a,{icon:["fas","angle-double-right"],class:"fa-fw"})])]),e.loading?((0,o.openBlock)(),(0,o.createElementBlock)("div",y,[(0,o.createVNode)(a,{icon:["fas","circle-notch"],class:"fa-spin mr-3"}),(0,o.createTextVNode)(" Loading responses... ")])):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.responses,(function(t){return(0,o.openBlock)(),(0,o.createElementBlock)("a",{href:"#",onClick:(0,o.withModifiers)((function(e){return i.select(t)}),["prevent"]),class:(0,o.normalizeClass)(["lg:border-r-4 block hover:bg-gray-100 text-gray-700 hover:text-gray-900",{"border-primary-400":i.isSelected(t),"border-gray-200":!i.isSelected(t)}]),key:t.id},[(0,o.createElementVNode)("div",v,[(0,o.createElementVNode)("div",x,[(0,o.createElementVNode)("div",h,[(0,o.createVNode)(a,{icon:["far","star"],"fixed-width":"",class:"mb-2"}),(0,o.createVNode)(a,{icon:["far","check-circle"],"fixed-width":""})]),(0,o.createElementVNode)("div",k,[(0,o.createElementVNode)("div",w,[(0,o.createElementVNode)("b",null,(0,o.toDisplayString)(t.identifiable_email_address),1),(0,o.createElementVNode)("span",E,(0,o.toDisplayString)(e.$moment(t.created_at).format("L")),1)]),(0,o.createElementVNode)("div",N," Re: "+(0,o.toDisplayString)(t.form.name),1)])])])],10,g)})),128)),0!=e.responses.length||e.loading?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",V,O))])}]]);var F={class:"leading-none flex-1 flex"},$={key:0,class:"w-full"},L={class:"flex flex-row-reverse border-b py-4 px-6 justify-between items-center",style:{height:"52px"}},R=(0,o.createElementVNode)("div",null,null,-1),T={key:0,class:"text-gray-500 flex items-center"},q={class:"text-xs font-mono ml-2"},Z={class:"border-b p-6 tracking-wide"},M={class:"text-lg font-bold"},z={class:"mt-3 text-sm"},I={class:"flex mb-1"},A=(0,o.createElementVNode)("div",{class:"text-gray-700",style:{width:"75px"}},"Regarding",-1),U={class:"flex-grow"},G={class:"flex"},H=(0,o.createElementVNode)("div",{class:"text-gray-700",style:{width:"75px"}},"Date",-1),J={class:"flex-grow"},K={class:"flex border-b p-6 tracking-wide justify-between items-center"},Q={class:"flex flex-col text-lg"},W={class:"mb-2"},X={class:"text-sm"},Y={class:"p-6 leading-loose"},ee=["for"],te=["id"],re={key:0,class:"bg-white shadow rounded-md mt-2"},oe={class:"p-2 sm:px-4"},ne={class:"flex items-center justify-between"},le=["href"],ie=["src","alt"],ae=["src","alt"],se=["textContent"],ce=["textContent"],de={key:1},me={key:1,class:"h-full flex flex-1 justify-center items-center text-5xl text-gray-300"};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==fe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ye={name:"response-view",mixins:[r(8273).Z],computed:ue({},(0,p.Se)({response:"inbox/getResponse",fields:"inbox/getFields"})),methods:ue({},(0,p.nv)({}))},ge=(0,_.Z)(ye,[["render",function(e,t,r,n,l,i){var a=(0,o.resolveComponent)("fa-icon"),s=(0,o.resolveComponent)("mq-layout");return(0,o.openBlock)(),(0,o.createElementBlock)("div",F,[e.response.id?((0,o.openBlock)(),(0,o.createElementBlock)("div",$,[(0,o.createElementVNode)("div",L,[R,e.response.identifiable_ip_address?((0,o.openBlock)(),(0,o.createElementBlock)("div",T,[(0,o.createVNode)(a,{icon:["fas","server"],"fixed-width":""}),(0,o.createTextVNode)(),(0,o.createElementVNode)("span",q,(0,o.toDisplayString)(e.response.identifiable_ip_address),1)])):(0,o.createCommentVNode)("",!0)]),(0,o.createVNode)(s,{mq:"sm"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",Z,[(0,o.createElementVNode)("div",M,(0,o.toDisplayString)(e.response.identifiable_email_address),1),(0,o.createElementVNode)("div",z,[(0,o.createElementVNode)("div",I,[A,(0,o.createElementVNode)("div",U,(0,o.toDisplayString)(e.response.form.name),1)]),(0,o.createElementVNode)("div",G,[H,(0,o.createElementVNode)("div",J,(0,o.toDisplayString)(e.$moment(e.response.created_at).format("LLL")),1)])])])]}),void 0,!0),_:1}),(0,o.createVNode)(s,{mq:"md+"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",K,[(0,o.createElementVNode)("div",Q,[(0,o.createElementVNode)("b",W,(0,o.toDisplayString)(e.response.identifiable_email_address),1),(0,o.createElementVNode)("span",null,"Re: "+(0,o.toDisplayString)(e.response.form.name),1)]),(0,o.createElementVNode)("div",X,(0,o.toDisplayString)(e.$moment(e.response.created_at).format("LLL")),1)])]}),void 0,!0),_:1}),(0,o.createElementVNode)("div",Y,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.fields,(function(t){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"form__group",key:t.handle},[(0,o.createElementVNode)("label",{for:t.handle,class:"form__label"},(0,o.toDisplayString)(t.name),9,ee),(0,o.createElementVNode)("div",{id:t.handle},["file"==t.type.id?((0,o.openBlock)(),(0,o.createElementBlock)("div",re,[(0,o.createElementVNode)("ul",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.response[t.handle],(function(t,r){return(0,o.openBlock)(),(0,o.createElementBlock)("li",{key:"file.".concat(r)},[(0,o.createElementVNode)("div",oe,[(0,o.createElementVNode)("div",ne,[(0,o.createElementVNode)("a",{target:"_blank",href:t.url},["image"==t.type?((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:0,class:"upload__file--preview max-w-12",src:t.url,alt:t.name},null,8,ie)):((0,o.openBlock)(),(0,o.createElementBlock)("img",{key:1,class:"upload__file--preview max-w-12",src:"/vendor/fusion/img/".concat(t.type,"-large.svg"),alt:t.name},null,8,ae))],8,le),(0,o.createElementVNode)("div",{class:"upload__file--name",textContent:(0,o.toDisplayString)(t.name)},null,8,se),(0,o.createElementVNode)("div",{class:"upload__file--size",textContent:(0,o.toDisplayString)(e.filesize(t.bytes))},null,8,ce)])])])})),128))])])):((0,o.openBlock)(),(0,o.createElementBlock)("p",de,(0,o.toDisplayString)(e.response[t.handle]),1))],8,te)])})),128))])])):((0,o.openBlock)(),(0,o.createElementBlock)("div",me,[(0,o.createVNode)(a,{icon:["far","envelope"],class:"fa-fw fa-3x"})]))])}]]);var ve={class:"inbox__filter-sidebar"},xe={class:"card h-full"},he={class:"card__body"},ke={class:"list"},we={key:0,class:"list"},Ee=[(0,o.createElementVNode)("span",{class:"list--separator pt-0"},"Inboxes",-1),(0,o.createElementVNode)("span",{class:"px-2 text-gray-600 leading-loose"},"No forms available.",-1)],Ne={key:1,class:"list"},Ve=(0,o.createElementVNode)("span",{class:"list--separator pt-0"},"Forms",-1),Oe=["onClick"];function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Pe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==Pe(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ce={name:"filter-sidebar",computed:Se({},(0,p.Se)({forms:"inbox/getForms",form:"inbox/getForm"})),methods:Se(Se({},(0,p.nv)({select:"inbox/selectForm"})),{},{isSelected:function(e){return!!this.form&&this.form.id==e.id}})};function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){$e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_e(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Le={auth:function(){return{permission:"responses.viewAny"}},head:{title:function(){return{inner:"Inbox"}}},components:{"response-list":D,"response-view":ge,"filter-sidebar":(0,_.Z)(Ce,[["render",function(e,t,r,n,l,i){var a=(0,o.resolveComponent)("fa-icon");return(0,o.openBlock)(),(0,o.createElementBlock)("div",ve,[(0,o.createElementVNode)("div",xe,[(0,o.createElementVNode)("div",he,[(0,o.createElementVNode)("div",ke,[0==e.forms.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",we,Ee)):((0,o.openBlock)(),(0,o.createElementBlock)("div",Ne,[Ve,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.forms,(function(t){return(0,o.openBlock)(),(0,o.createElementBlock)("a",{key:t.handle,href:"#",class:(0,o.normalizeClass)(["list--item leading-loose",{"router-link-active":i.isSelected(t)}]),onClick:(0,o.withModifiers)((function(r){return e.select(t)}),["prevent"])},[(0,o.createVNode)(a,{icon:["fas","inbox"],"fixed-width":"",class:"mr-2"}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(t.name),1)],10,Oe)})),128))]))])])])])}]])},computed:Fe({},(0,p.Se)({response:"inbox/getResponse"})),methods:Fe({},(0,p.nv)({clear:"inbox/clearResponse"})),beforeRouteEnter:function(e,t,r){f.Z.dispatch("inbox/fetchForms").then((function(e){f.Z.getters["inbox/getForms"].length&&f.Z.dispatch("inbox/selectForm",m().head(f.Z.getters["inbox/getForms"])),r()}))}},Re=(0,_.Z)(Le,[["render",function(e,t,r,d,m,f){var p=(0,o.resolveComponent)("page-title"),u=(0,o.resolveComponent)("portal"),b=(0,o.resolveComponent)("ui-button"),y=(0,o.resolveComponent)("fa-icon"),g=(0,o.resolveComponent)("ui-card"),v=(0,o.resolveComponent)("filter-sidebar"),x=(0,o.resolveComponent)("response-list"),h=(0,o.resolveComponent)("response-view");return(0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createVNode)(u,{to:"title"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(p,{icon:"inbox"},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Inbox")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,o.createVNode)(u,{to:"actions"},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(b,{variant:"primary",to:{name:"forms"}},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("Manage Forms")]}),void 0,!0),_:1})]}),void 0,!0),_:1}),"sm"==e.$mq&&e.response.id?((0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(g,{class:"flex items-center justify-between"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.withModifiers)((function(){return e.clear&&e.clear.apply(e,arguments)}),["prevent"])),class:"rounded p-2 hover:bg-gray-100 text-gray-900 border border-gray-300"},[(0,o.createVNode)(y,{icon:["fas","arrow-left"],class:"fa-fw"})])]}),void 0,!0),_:1})])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",a,["sm"==e.$mq&&!e.response.id||"sm"!=e.$mq?((0,o.openBlock)(),(0,o.createBlock)(v,{key:0})):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",c,["sm"==e.$mq&&!e.response.id||"sm"!=e.$mq?((0,o.openBlock)(),(0,o.createBlock)(x,{key:0})):(0,o.createCommentVNode)("",!0),"sm"==e.$mq&&e.response.id||"sm"!=e.$mq?((0,o.openBlock)(),(0,o.createBlock)(h,{key:1})):(0,o.createCommentVNode)("",!0)])])])])}]])}}]);