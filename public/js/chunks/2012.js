"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[2012],{2945:(e,t,o)=>{o.d(t,{Z:()=>n});const n={props:{field:{type:Object,required:!0},value:{required:!1,default:null},errors:{type:Object,required:!1,default:function(){}}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{hasError:function(e){return this.errors&&this.errors.has(e)},errorMessage:function(e){return this.hasError(e)?this.errors.get(e):""}}}},2012:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var n=o(3802),r=(0,n.createElementVNode)("span",null,"Manage User Selection",-1),l={key:0,class:"table"},i={class:"w-8"},a=["textContent"],c=["textContent"],d={class:"w-16"},s=(0,n.createElementVNode)("span",{class:"sr-only"},"Destroy",-1),u={key:1,class:"help"},m={key:1};const f={name:"user-fieldtype",mixins:[o(2945).Z],data:function(){return{endpoint:"/datatable/users"}},methods:{isChecked:function(e){return!!_.find(this.model,(function(t){return t.id==e}))},toggle:function(e){this.isChecked(e.id)?this.remove(e.id):this.model.push(e)},remove:function(e){this.model=_.reject(this.model,(function(t){return t.id==e}))}},created:function(){_.isEmpty(this.value)&&(this.model=[])}};const p=(0,o(3744).Z)(f,[["render",function(e,t,o,f,p,h){var v=(0,n.resolveComponent)("fa-icon"),k=(0,n.resolveComponent)("ui-button"),C=(0,n.resolveComponent)("ui-sortable-handle"),V=(0,n.resolveComponent)("ui-sortable-item"),g=(0,n.resolveComponent)("ui-sortable-list"),w=(0,n.resolveComponent)("ui-field-group"),x=(0,n.resolveComponent)("ui-checkbox"),N=(0,n.resolveComponent)("router-link"),b=(0,n.resolveComponent)("ui-date"),y=(0,n.resolveComponent)("ui-table"),E=(0,n.resolveComponent)("ui-modal"),B=(0,n.resolveDirective)("modal");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(w,{name:e.field.handle,fieldId:"".concat(e.field.handle,"-field"),label:e.field.name,help:e.field.help,hasError:e.hasError(e.field.handle),errorMessage:e.errorMessage(e.field.handle)},{default:(0,n.withCtx)((function(){return[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(k,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(v,{icon:["fas","tasks"],class:"mr-1"}),r]}),void 0,!0),_:1})),[[B,void 0,"selection-modal"]]),e.model&&e.model.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("table",l,[(0,n.createVNode)(g,{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t}),class:(0,n.normalizeClass)("".concat(e.field.handle,"-sortable-list"))},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.model,(function(e){return(0,n.openBlock)(),(0,n.createBlock)(V,{key:e.id},{default:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("td",i,[(0,n.createVNode)(C,{class:"cursor-move inline-block"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(v,{icon:"grip-vertical",class:"handle fa-fw text-gray-400 mr-3"})]}),void 0,!0),_:1})]),(0,n.createElementVNode)("td",{textContent:(0,n.toDisplayString)(e.name)},null,8,a),(0,n.createElementVNode)("td",{textContent:(0,n.toDisplayString)(e.email)},null,8,c),(0,n.createElementVNode)("td",d,[(0,n.createVNode)(k,{icon:"",onClick:(0,n.withModifiers)((function(t){return h.remove(e.id)}),["prevent"])},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(v,{icon:"times"}),s]}),void 0,!0),_:2},1032,["onClick"])])])]}),void 0,!0),_:2},1024)})),128))])]}),void 0,!0),_:1},8,["modelValue","class"])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",u,"Your list is empty."))]}),void 0,!0),_:1},8,["name","fieldId","label","help","hasError","errorMessage"]),(0,n.createVNode)(E,{name:"selection-modal",title:"Browse users"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(y,{bulk:!1,endpoint:p.endpoint,id:"user-items","sort-by":"name","sort-in":"desc","per-page":10},{name:(0,n.withCtx)((function(e){return[(0,n.createVNode)(x,{id:"selection-".concat(e.record.id),name:"selection",value:h.isChecked(e.record.id),onInput:function(t){return h.toggle(e.record)}},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.record.name),1)]}),void 0,!0),_:2},1032,["id","value","onInput"])]})),role:(0,n.withCtx)((function(t){return[e.$can("roles.view")?((0,n.openBlock)(),(0,n.createBlock)(N,{key:0,to:{name:"roles.show",params:{role:t.record.role.id}}},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(t.record.role.name),1)]}),void 0,!0),_:2},1032,["to"])):((0,n.openBlock)(),(0,n.createElementBlock)("span",m,(0,n.toDisplayString)(t.record.role.name),1))]})),created_at:(0,n.withCtx)((function(e){return[(0,n.createVNode)(b,{timestamp:e.record.created_at},null,8,["timestamp"])]})),_:1},8,["endpoint"])]}),void 0,!0),_:1})])}]])}}]);