"use strict";(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[869],{869:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var i=n(3802),o={class:"link-page"},a={class:"buttons"},r={key:0,class:"card"},d=[(0,i.createElementVNode)("div",{class:"card__body text-center"},[(0,i.createElementVNode)("p",null,"Add your first link to get started.")],-1)],l={class:"flex items-center"},c=(0,i.createElementVNode)("p",null,"Are you sure you want to permenantly delete this link?",-1);var s=n(1513),u=n(8401);const v={auth:function(){return{permission:"links.viewAny"}},components:{VueNestable:s.VueNestable,VueNestableHandle:s.VueNestableHandle},head:{title:function(){return{inner:this.navigation.name||"Loading..."}}},data:function(){return{loaded:!1,navigation:{},links:[],saving:!1,changed:!1,form:new u.Z({name:"",url:"",new_window:0})}},computed:{options:function(){return this.links.map((function(e){return{label:e.name,value:e.id}}))},endpoint:function(){return this.navigation.id?"/datatable/navigations/"+this.navigation.id:null}},methods:{save:function(){var e=this;this.saving=!0,axios.post("/api/navigation/"+this.navigation.id+"/links/reorder",{links:this.links}).then((function(t){e.saving=!1,e.changed=!1,toast("Links successfully saved.","success")}))},changing:function(){this.loaded?this.changed=!0:this.loaded=!0},fetchLinks:function(){var e=this;return axios.get("/api/navigation/"+this.navigation.id).then((function(t){e.links=t.data.data.links}))},destroy:function(e){var t=this;axios.delete("/api/navigation/"+this.navigation.id+"/links/"+e).then((function(e){t.fetchLinks().then((function(){toast("Link successfully deleted.","success"),bus().$emit("refresh-datatable-entries")}))}))}},beforeRouteEnter:function(e,t,n){axios.get("/api/navigation/"+e.params.navigation).then((function(e){n((function(t){t.navigation=e.data.data,t.links=e.data.data.links,t.$emit("updateHead")}))}))},beforeRouteUpdate:function(e,t,n){var i=this;axios.get("/api/navigation/"+e.params.navigation).then((function(e){i.navigation=e.data.data,i.links=e.data.data.links,i.$emit("updateHead")})),n()}};const k=(0,n(3744).Z)(v,[["render",function(e,t,n,s,u,v){var k=(0,i.resolveComponent)("page-title"),f=(0,i.resolveComponent)("portal"),h=(0,i.resolveComponent)("ui-button"),p=(0,i.resolveComponent)("ui-status"),m=(0,i.resolveComponent)("router-link"),g=(0,i.resolveComponent)("ui-dropdown-link"),C=(0,i.resolveComponent)("ui-dropdown-divider"),w=(0,i.resolveComponent)("ui-actions"),x=(0,i.resolveComponent)("ui-table"),N=(0,i.resolveComponent)("ui-card-body"),V=(0,i.resolveComponent)("ui-card"),_=(0,i.resolveComponent)("ui-modal"),y=(0,i.resolveDirective)("modal");return(0,i.openBlock)(),(0,i.createElementBlock)("div",o,[(0,i.createVNode)(f,{to:"title"},{default:(0,i.withCtx)((function(){return[(0,i.createVNode)(k,{icon:"anchor"},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)((0,i.toDisplayString)(u.navigation.name),1)]}),void 0,!0),_:1})]}),void 0,!0),_:1}),(0,i.createVNode)(f,{to:"actions"},{default:(0,i.withCtx)((function(){return[(0,i.createElementVNode)("div",a,["sm"!=e.$mq?((0,i.openBlock)(),(0,i.createBlock)(h,{key:"go-back-btn",to:{name:"navigation"},variant:"secondary"},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)("Go Back")]}),void 0,!0),_:1})):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(h,{key:"create-btn",to:{name:"links.create"},variant:"primary"},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)("Create")]}),void 0,!0),_:1},8,["to"]),u.changed?((0,i.openBlock)(),(0,i.createBlock)(h,{key:"save-btn",variant:"primary",onClick:(0,i.withModifiers)(v.save,["prevent"]),disabled:u.saving},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)("Save")]}),void 0,!0),_:1},8,["onClick","disabled"])):(0,i.createCommentVNode)("",!0)])]}),void 0,!0),_:1}),0==u.links.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",r,d)):(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(V,{key:1},{default:(0,i.withCtx)((function(){return[(0,i.createVNode)(N,null,{default:(0,i.withCtx)((function(){return[((0,i.openBlock)(),(0,i.createBlock)(x,{id:"entries",class:"entries-table","sort-by":"order",link_name:"links.edit",link_param:"link",show_status:!0,reorder_route:"/api/navigation/"+u.navigation.id+"/links/reorder",endpoint:v.endpoint,"per-page":50,key:"entries-"+u.navigation.id},{name:(0,i.withCtx)((function(e){return[(0,i.createElementVNode)("div",l,[(0,i.createVNode)(p,{value:e.record.status,class:"mr-2"},null,8,["value"]),(0,i.createVNode)(m,{to:{name:"links.edit",params:{navigation:u.navigation.id,link:e.record.id}}},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)((0,i.toDisplayString)(e.record.name),1)]}),void 0,!0),_:2},1032,["to"])])]})),url:(0,i.withCtx)((function(e){return[(0,i.createElementVNode)("code",null,(0,i.toDisplayString)(e.record.url),1)]})),actions:(0,i.withCtx)((function(e){return[((0,i.openBlock)(),(0,i.createBlock)(w,{id:"entry_"+e.record.id+"_actions",key:"entry_"+e.record.id+"_actions"},{default:(0,i.withCtx)((function(){return[(0,i.createVNode)(g,{to:{name:"links.edit",params:{navigation:u.navigation.id,link:e.record.id}}},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)("Edit")]}),void 0,!0),_:2},1032,["to"]),(0,i.createVNode)(C),(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(g,{onClick:t[0]||(t[0]=(0,i.withModifiers)((function(){}),["prevent"])),class:"danger"},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)(" Delete ")]}),void 0,!0),_:2},1024)),[[y,e.record,"delete-link"]])]}),void 0,!0),_:2},1032,["id"]))]})),_:1},8,["reorder_route","endpoint"]))]}),void 0,!0),_:1})]}),void 0,!0),_:1},512)),[[i.vShow,v.endpoint]]),(0,i.createVNode)(f,{to:"modals"},{default:(0,i.withCtx)((function(){return[(0,i.createVNode)(_,{name:"delete-link",title:"Delete Link",key:"delete_link"},{footer:(0,i.withCtx)((function(e){return[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(h,{onClick:function(t){return v.destroy(e.data.id)},variant:"danger",class:"ml-3"},{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)("Delete")]}),void 0,!0),_:2},1032,["onClick"])),[[y,void 0,"delete-link"]]),(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(h,null,{default:(0,i.withCtx)((function(){return[(0,i.createTextVNode)("Cancel")]}),void 0,!0),_:1})),[[y,void 0,"delete-link"]])]})),default:(0,i.withCtx)((function(){return[c]}),void 0,!0),_:1})]}),void 0,!0),_:1})])}]])}}]);